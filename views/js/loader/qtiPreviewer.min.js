!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash")):"function"==typeof define&&define.amd?define("core/format",["lodash"],factory):(global=global||self)["core/format"]=factory(global._)}(this,function(_){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_;var pattern=/(%[sdj])/g;return function(message){var replacements=Array.prototype.slice.call(arguments,1);return _.reduce(message.match(pattern),function(acc,match,index){var replacement="";if(void 0!==replacements[index]){switch(match){case"%d":replacement=Number(replacements[index]);break;case"%j":try{replacement=JSON.stringify(
replacements[index]).replace(/"/g,"")}catch(e){}break;default:replacement=replacements[index]}message=message.replace(match,replacement)}return message},message)}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("core/promise",factory):(global=global||self)["core/promise"]=factory()}(this,function(){"use strict";return Promise}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/format"),require("core/promise")):"function"==typeof define&&define.amd?define("core/logger/api",[
"lodash","core/format","core/promise"],factory):(global=global||self)["core/logger/api"]=factory(global._,global["core/format"],global["core/promise"])}(this,function(_,format,Promise){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,format=format&&format.hasOwnProperty("default")?format.default:format,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise;function loggerFactory(name,minLevel,fields){var baseRecord,logger;if(!_.isString(name)||_.isEmpty(name))throw new TypeError("A logger needs a name");return _.isPlainObject(minLevel)&&"undefined"==typeof field&&(fields=minLevel,minLevel=defaultLevel),baseRecord=_.defaults(
fields||{},{name:name,pid:1,hostname:navigator.userAgent}),logger={log:function(level,recordFields,message){var record,err,rest=[],time=(new Date).toISOString();if(!1!==loggerFactory.providers&&checkMinLevel(minLevel||defaultLevel,level))return rest=_.isString(recordFields)||recordFields instanceof Error?(message=recordFields,recordFields={},[].slice.call(arguments,2)):[].slice.call(arguments,3),record={level:getLevel(level),v:0,time:time},checkMinLevel(levels.error,level)||message instanceof Error?(err=message instanceof Error?message:(message=_.isObject(message)?JSON.stringify(message):message,new Error(message)),record.msg=err.message,record.err=err
):record.msg=format.apply(null,[message].concat(rest)),_.merge(record,baseRecord,recordFields),logQueue.push(record),loggerFactory.flush(),this},level:function(value){return void 0!==value?(minLevel=getLevelNum(value),this):getLevel(minLevel)},child:function(childFields){return loggerFactory(name,minLevel,_.defaults(childFields,baseRecord))}},_.reduce(levels,function(target,level,levelName){return target[levelName]=_.partial(logger.log,level),target},logger)}var defaultLevel="info",levels={fatal:60,error:50,warn:40,info:30,debug:20,trace:10},logQueue=[],getLevel=function(level){return void 0===level||_.isString(level)&&!_.has(levels,level
)?defaultLevel:_.isNumber(level)?_.findKey(levels,function(l){return l===level})||defaultLevel:level},getLevelNum=function(level){return _.isString(level)&&_.has(levels,level)?levels[level]:_.isNumber(level)&&_.contains(levels,level)?level:levels[defaultLevel]},checkMinLevel=function(minLevel,level){return getLevelNum(level)>=getLevelNum(minLevel)};return loggerFactory.levels=levels,loggerFactory.providers=!1,loggerFactory.load=function(providerConfigs){var self=this,modules=[];return this.providers=[],new Promise(function(resolve,reject){_.forEach(providerConfigs,function(providerConfig,providerName){modules.push(providerName)}),require(modules,function(){
var loadedProviders=[].slice.call(arguments);_.forEach(loadedProviders,function(provider,moduleKey){try{self.register(provider,providerConfigs[modules[moduleKey]])}catch(err){reject(err)}}),self.flush(),resolve()},reject)})},loggerFactory.register=function(provider,providerConfig){if(!_.isPlainObject(provider)||!_.isFunction(provider.log))throw new TypeError("A log provider is an object with a log method");provider.checkMinLevel=checkMinLevel,_.isFunction(provider.setConfig)&&provider.setConfig(providerConfig),this.providers=this.providers||[],this.providers.push(provider)},loggerFactory.flush=function(){_.isArray(this.providers)&&0<this.providers.length&&(
_.forEach(logQueue,function(message){_.forEach(loggerFactory.providers,function(provider){provider.log.call(provider,message)})}),logQueue=[])},loggerFactory.setDefaultLevel=function(level){return defaultLevel=getLevel(level)},loggerFactory}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("module"),require("core/logger/api")):"function"==typeof define&&define.amd?define("core/logger",["lodash","module","core/logger/api"],factory):(global=global||self)["core/logger"]=factory(global._,global.module,global["core/logger/api"])}(this,function(_,module,loggerFactory){"use strict"
;_=_&&_.hasOwnProperty("default")?_.default:_,module=module&&module.hasOwnProperty("default")?module.default:module;var defaultConfig={level:(loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory.default:loggerFactory).levels.warn,loggers:{"core/logger/console":{level:"warn"}}},config=_.defaults(module.config()||{},defaultConfig),logger=loggerFactory("core/logger");return loggerFactory.setDefaultLevel(config.level),loggerFactory.load(config.loggers),window.onerror=function(msg,url,line,col,error){logger.error("Caught[via window.onerror]: '"+msg+"' from "+url+":"+line+":"+col)},window.setTaoLogLevel=function(level){
return loggerFactory.setDefaultLevel(level)},loggerFactory}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise")):"function"==typeof define&&define.amd?define("core/moduleLoader",["lodash","core/promise"],factory):(global=global||self)["core/moduleLoader"]=factory(global._,global["core/promise"])}(this,function(_,Promise){"use strict";return _=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,function(requiredModules,validate,specs){var loaded={},modules={},excludes=[],bundles=[],loader={
addList:function(moduleList){return _.forEach(moduleList,this.add,this),this},add:function(def){if(_.isEmpty(def.module)||!_.isString(def.module))throw new TypeError("An AMD module must be defined");if(_.isEmpty(def.category)||!_.isString(def.category))throw new TypeError("Providers must belong to a category");return modules[def.category]=modules[def.category]||[],_.isNumber(def.position)?modules[def.category][def.position]=def.module:"prepend"===def.position||"before"===def.position?modules[def.category].unshift(def.module):modules[def.category].push(def.module),def.bundle&&!_.contains(bundles,def.bundle)&&bundles.push(def.bundle),this},append:function(def
){return this.add(_.merge({position:"append"},def))},prepend:function(def){return this.add(_.merge({position:"prepend"},def))},remove:function(module){return excludes.push(module),this},load:function(loadBundles){var self=this,dependencies=_(modules).values().flatten().uniq().difference(excludes).value(),loadModules=function(amdModules){return _.isArray(amdModules)&&amdModules.length?new Promise(function(resolve,reject){require(amdModules,function(){resolve([].slice.call(arguments))},reject)}):Promise.resolve()};return loadModules(loadBundles?bundles:[]).then(function(){return loadModules(dependencies)}).then(function(loadedModules){return _.forEach(
dependencies,function(dependency,index){var module=loadedModules[index],category=_.findKey(modules,function(val){return _.contains(val,dependency)});if(!validate(module))throw new TypeError("Invalid module");_.isString(category)&&(loaded[category]=loaded[category]||[],loaded[category].push(module))}),self.getModules()})},getModules:function(category){return _.isString(category)?loaded[category]||[]:_(loaded).values().flatten().uniq().value()},getCategories:function(){return _.keys(loaded)}};return validate=_.isFunction(validate)?validate:_.isPlainObject,_.forEach(requiredModules,function(moduleList,category){if(_.isEmpty(category)||!_.isString(category)
)throw new TypeError("Modules must belong to a category");if(!_.isArray(moduleList))throw new TypeError("A list of modules must be an array");if(!_.all(moduleList,validate))throw new TypeError("The list does not contain valid modules");loaded[category]?loaded[category]=loaded[category].concat(moduleList):loaded[category]=moduleList}),specs&&_(specs).functions().forEach(function(method){loader[method]=function(){return specs[method].apply(loader,[].slice.call(arguments))}}),loader}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/moduleLoader")
):"function"==typeof define&&define.amd?define("core/pluginLoader",["lodash","core/moduleLoader"],factory):(global=global||self)["core/pluginLoader"]=factory(global._,global["core/moduleLoader"])}(this,function(_,moduleLoaderFactory){"use strict";return _=_&&_.hasOwnProperty("default")?_.default:_,moduleLoaderFactory=moduleLoaderFactory&&moduleLoaderFactory.hasOwnProperty("default")?moduleLoaderFactory.default:moduleLoaderFactory,function(requiredPlugins){return moduleLoaderFactory(requiredPlugins,_.isFunction,{getPlugins:function(category){return this.getModules(category)}})}}),function(global,factory){
"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/moduleLoader")):"function"==typeof define&&define.amd?define("core/providerLoader",["lodash","core/moduleLoader"],factory):(global=global||self)["core/providerLoader"]=factory(global._,global["core/moduleLoader"])}(this,function(_,moduleLoaderFactory){"use strict";function validateProvider(provider){return _.isPlainObject(provider)&&_.isFunction(provider.init)&&_.isString(provider.name)&&!_.isEmpty(provider.name)}return _=_&&_.hasOwnProperty("default")?_.default:_,moduleLoaderFactory=moduleLoaderFactory&&moduleLoaderFactory.hasOwnProperty("default"
)?moduleLoaderFactory.default:moduleLoaderFactory,function(requiredProviders){return moduleLoaderFactory(requiredProviders,validateProvider,{getProviders:function(category){return this.getModules(category)}})}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("lib/uuid"),require("core/logger")):"function"==typeof define&&define.amd?define("core/eventifier",["lodash","core/promise","lib/uuid","core/logger"],factory):(global=global||self)["core/eventifier"]=factory(global._,global["core/promise"],global["lib/uuid"],global["core/logger"])}(this,function(_,
Promise,uuid,loggerFactory){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,uuid=uuid&&uuid.hasOwnProperty("default")?uuid.default:uuid,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory.default:loggerFactory;var defaultNs="@",eventifierLogger=loggerFactory("core/eventifier");function getEventNames(eventNames){return!_.isString(eventNames)||_.isEmpty(eventNames)?[]:_(eventNames.split(/\s/g)).compact().uniq().value()}function getName(eventName){return-1<eventName.indexOf(".")?eventName.substr(0,eventName.indexOf(".")):eventName}
function getNamespace(eventName){return-1<eventName.indexOf(".")?eventName.substr(eventName.indexOf(".")+1):defaultNs}return function(target){var targetName,logger,stoppedEvents,eventHandlers={},getHandlers=function(eventName,type){var name=getName(eventName),ns=getNamespace(eventName);return type=type||"between",eventHandlers[ns]=eventHandlers[ns]||{},eventHandlers[ns][name]=eventHandlers[ns][name]||{before:[],between:[],after:[]},eventHandlers[ns][name][type]},eventApi={on:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName).push(handler)}),this},off:function(eventNames){
return _.forEach(getEventNames(eventNames),function(eventName){var offNamespaces,name=getName(eventName),ns=getNamespace(eventName);ns&&!name?"*"===ns?((offNamespaces={})[defaultNs]=eventHandlers[defaultNs],eventHandlers=offNamespaces):eventHandlers[ns]={}:_.forEach(eventHandlers,function(nsHandlers,namespace){!nsHandlers[name]||ns!==defaultNs&&ns!==namespace||(nsHandlers[name]={before:[],between:[],after:[]})})}),this},removeAllListeners:function(){return eventHandlers={},this},trigger:function(eventNames){var self=this,args=[].slice.call(arguments,1);function triggerBetween(allHandlers,event){shouldStop(event.name)?logHandlerStop("before",event
):triggerHandlers(allHandlers.between,event).then(function(){!function(handlers,event){shouldStop(event.name)?logHandlerStop("on",event):triggerHandlers(handlers,event).then(function(){shouldStop(event.name)&&logHandlerStop("after",event)}).catch(function(err){logHandlerStop("after",event,err)})}(allHandlers.after,event)}).catch(function(err){logHandlerStop("on",event,err)})}function triggerHandlers(handlers,event){var pHandlers;return pHandlers=handlers.map(function(handler){return shouldStop(event.name)?Promise.reject():handler.apply(self,args)}),Promise.all(pHandlers)}function logHandlerStop(stoppedIn,event,err){err instanceof Error&&logger.error(err),
logger.trace({err:err,event:event.name,stoppedIn:stoppedIn},event.name+" handlers stopped")}function shouldStop(name){return stoppedEvents[name]}return stoppedEvents={},_.forEach(getEventNames(eventNames),function(eventName){var ns=getNamespace(eventName),name=getName(eventName),mergedHandlers=_(eventHandlers).filter(function(nsHandlers,namespace){return nsHandlers[name]&&(ns===defaultNs||ns===namespace||"*"===namespace)}).reduce(function(acc,nsHandlers){return acc.before=acc.before.concat(nsHandlers[name].before),acc.between=acc.between.concat(nsHandlers[name].between),acc.after=acc.after.concat(nsHandlers[name].after),acc},{before:[],between:[],after:[]})
;logger.trace({event:eventName,args:args},"trigger %s",eventName),mergedHandlers&&function(allHandlers,name,ns){var event={name:name,namespace:ns};allHandlers.before.length?function(handlers,event){var pHandlers,beforeArgs=args.slice();return beforeArgs.unshift(event),pHandlers=handlers.map(function(handler){var value=!shouldStop(event.name)&&handler.apply(self,beforeArgs);return!1===value?Promise.reject():value}),Promise.all(pHandlers)}(allHandlers.before,event).then(function(){triggerBetween(allHandlers,event)}).catch(function(err){logHandlerStop("before",event,err)}):triggerBetween(allHandlers,event)}(mergedHandlers,name,ns)}),this},before:function(
eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"before").push(handler)}),this},after:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"after").push(handler)}),this},stopEvent:function(name){_.isString(name)&&!_.isEmpty(name.trim())&&(stoppedEvents[name.trim()]=!0)},spread:function(destination,eventNames){var self=this;return destination&&_.isFunction(destination.trigger)&&(_.isString(eventNames)&&(eventNames=getEventNames(eventNames)),_.forEach(eventNames,function(eventName){self.on(eventName
,function(){var args=[eventName].concat([].slice.call(arguments));destination.trigger.apply(destination,args)})})),this}};return targetName=(target=target||{}).name||target.id||target.serial||uuid(6),logger=eventifierLogger.child({target:targetName}),_(eventApi).functions().forEach(function(method){_.isFunction(target[method])&&eventifierLogger.warn("The target object has already a method named "+method,target),target[method]=function(){var args=[].slice.call(arguments);return eventApi[method].apply(target,args)}}),target}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash")
):"function"==typeof define&&define.amd?define("core/providerRegistry",["lodash"],factory):(global=global||self)["core/providerRegistry"]=factory(global._)}(this,function(_){"use strict";return _=_&&_.hasOwnProperty("default")?_.default:_,function(target,validator){var _providers={};return(target=target||{}).registerProvider=function(name,provider){var valid=!0;if(!_.isString(name)||name.length<=0)throw new TypeError("It is required to give a name to your provider.");if(!_.isPlainObject(provider)||!_.isFunction(provider.init))throw new TypeError("A provider is an object that contains at least an init function.");return(valid=validator&&_.isFunction(validator
)?validator(provider):valid)&&(_providers[name]=provider),this},target.getProvider=function(providerName){var provider;if(!_providers||0===_.size(_providers))throw new Error("No provider registered");if(_.isString(providerName)&&0<providerName.length?provider=_providers[providerName]:1===_.size(_providers)&&(providerName=_.keys(_providers)[0],provider=_providers[providerName]),!provider)throw new Error("No candidate found for the provider");return provider},target.getAvailableProviders=function(){return _.keys(_providers)},target.clearProviders=function(){return _providers={},this},target}}),function(global,factory){
"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("core/collections",factory):(global=global||self)["core/collections"]=factory()}(this,function(){"use strict";return{Map:window.Map,Set:window.Set,WeakMap:window.WeakMap,WeakSet:window.WeakSet}}),define("tpl!taoQtiTestPreviewer/previewer/runner",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),{},'<div class="previewer-component"></div>'})}),define("taoQtiTestPreviewer/previewer/runner",["jquery","lodash"
,"context","core/promise","taoTests/runner/runnerComponent","tpl!taoQtiTestPreviewer/previewer/runner"],function($,_,context,Promise,runnerComponentFactory,runnerTpl){"use strict";var defaults={};return function(config,container,template){return(config=_.defaults(config||{},defaults)).providers&&(config.providers=_.filter(config.providers,{category:"previewer"})),runnerComponentFactory(container||$(document.body),config,template||runnerTpl).on("render",function(){this.setState("fullpage",config.fullPage),this.setState("readonly",config.readOnly)}).on("ready",function(runner){var self=this;runner.on("destroy",function(){self.destroy()})})}}),function(global,
factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("util/regexEscape",factory):(global=global||self)["util/regexEscape"]=factory()}(this,function(){"use strict";return function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("util/regexEscape")):"function"==typeof define&&define.amd?define("util/wrapLongWords",["util/regexEscape"],factory):(global=global||self)["util/wrapLongWords"]=factory(global["util/regexEscape"])}(this,function(regexEscape){"use strict"
;regexEscape=regexEscape&&regexEscape.hasOwnProperty("default")?regexEscape.default:regexEscape;var getCutTerm=function(longWord,chunkExp){for(var cutTerms=longWord.match(chunkExp),i=cutTerms.length,oldFirst="",newFirst="",offenders=[".",":",";"];i--;)newFirst=cutTerms[i].charAt(0),-1<offenders.indexOf(newFirst)&&(cutTerms[i]=cutTerms[i].substr(1)),-1<offenders.indexOf(oldFirst)&&(cutTerms[i]=cutTerms[i]+oldFirst),oldFirst=newFirst;return cutTerms.join(" ")};return function(str,threshold){str=str.toString().replace(/([\w])</g,"$1 <");for(var cut,chunkExp=new RegExp(".{1,"+threshold+"}","g"),longWords=str.match(new RegExp("[\\S]{"+threshold+",}","g"))||[],
i=longWords.length;i--;)cut=getCutTerm(longWords[i],chunkExp),str=str.replace(new RegExp(regexEscape(longWords[i]),"g"),cut);return str}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("util/encode",factory):(global=global||self)["util/encode"]=factory()}(this,function(){"use strict";var _reQuot=/"/g,_reApos=/'/g,encodeHTML=function(html){return document.createElement("a").appendChild(document.createTextNode(html)).parentNode.innerHTML};return{html:encodeHTML,attribute:function(html){return encodeHTML(html).replace(_reQuot,"&quot;").replace(_reApos,"&apos;")
},encodeBase64:function(str){return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function(match,p1){return String.fromCharCode("0x"+p1)}))},decodeBase64:function(str){return decodeURIComponent(Array.prototype.map.call(atob(str),function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}}}),define("css!taoQtiTestPreviewer/previewer/provider/item/css/item",[],function(){}),define("taoQtiTestPreviewer/previewer/adapter/item/qtiItem",["lodash","core/logger","taoQtiTestPreviewer/previewer/runner","ui/feedback","css!taoQtiTestPreviewer/previewer/provider/item/css/item"],function(_,loggerFactory,previewerFactory,feedback){"use strict"
;var logger=loggerFactory("taoQtiTest/previewer"),defaultProviders=[{id:"qtiItemPreviewer",module:"taoQtiTestPreviewer/previewer/provider/item/item",bundle:"taoQtiTestPreviewer/loader/qtiPreviewer.min",category:"previewer"}],defaultPlugins=[{module:"taoQtiTestPreviewer/previewer/plugins/controls/close",bundle:"taoQtiTestPreviewer/loader/qtiPreviewer.min",category:"controls"},{module:"taoQtiTestPreviewer/previewer/plugins/navigation/submit/submit",bundle:"taoQtiTestPreviewer/loader/qtiPreviewer.min",category:"navigation"},{module:"taoQtiTestPreviewer/previewer/plugins/tools/scale/scale",bundle:"taoQtiTestPreviewer/loader/qtiPreviewer.min",category:"tools"},{
module:"taoQtiTest/runner/plugins/tools/itemThemeSwitcher/itemThemeSwitcher",bundle:"taoQtiTest/loader/testPlugins.min",category:"tools"}];return{name:"qtiItem",init:function(uri,state,config){return(config=_.defaults(config||{},{provider:"qtiItemPreviewer",serviceCallId:"previewer"})).providers=defaultProviders.concat(config.providers||[]),config.plugins=defaultPlugins.concat(config.plugins||[]),previewerFactory(config).on("error",function(err){_.isUndefined(err.message)?logger.error(err):feedback().error(err.message)}).on("ready",function(runner){runner.on("renderitem",function(){state&&runner.itemRunner.setState(state)}).loadItem(uri)})}}}),function(
global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("context")):"function"==typeof define&&define.amd?define("util/url",["lodash","context"],factory):(global=global||self)["util/url"]=factory(global._,global.context)}(this,function(_,context){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,context=context&&context.hasOwnProperty("default")?context.default:context;var parsers={absolute:/^(?:[a-z]+:)?\/\//i,base64:/^data:[^\/]+\/[^;]+(;charset=[\w]+)?;base64,/,query:/(?:^|&)([^&=]*)=?([^&]*)/g,
url:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/};return{parse:function(url){var matches,keys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","queryString","hash"],i=keys.length,parsed=Object.create({toString:function(){return this.source}});if(parsed.base64=parsers.base64.test(url),parsed.base64)parsed.source=url;else{for(matches=parsers.url.exec(url);i--;)parsed[keys[i]]=matches[i]||"";parsed.query={},parsed.queryString.replace(parsers.query,function($0,$1,$2){$1&&(parsed.query[$1]=$2)})}return parsed
},isAbsolute:function(url){return"object"==typeof url&&url.hasOwnProperty("source")?url.source!==url.relative:"string"==typeof url?parsers.absolute.test(url):void 0},isRelative:function(url){var absolute=this.isAbsolute(url);if("boolean"==typeof absolute)return!absolute},isBase64:function(url){return"object"==typeof url&&url.hasOwnProperty("source")?url.base64:"string"==typeof url?parsers.base64.test(url):void 0},encodeAsXmlAttr:function(uri){return/[<>&']+/.test(uri)?encodeURIComponent(uri):uri},build:function(path,params){var url,hasQueryString,queryString="";return path&&(_.isString(path)&&(url=path),_.isArray(path)&&(url="",_.forEach(path,function(chunk
){/\/$/.test(url)&&/^\//.test(chunk)?url+=chunk.substr(1):""===url||/\/$/.test(url)||/^\//.test(chunk)?url+=chunk:url+="/"+chunk})),_.isPlainObject(params)&&(hasQueryString=-1<url.indexOf("?"),queryString=_.reduce(params,function(acc,value,key){return _.isEmpty(acc)&&!hasQueryString||(acc+="&"),"object"!=typeof value||_.isArray(value)?acc+=encodeURIComponent(key)+"="+encodeURIComponent(value):_.forOwn(value,function(parameterValue,parameterName){acc+=encodeURIComponent(key)+"["+encodeURIComponent(parameterName)+"]="+encodeURIComponent(parameterValue)+"&"}),acc},queryString),_.isEmpty(queryString)||(hasQueryString||(url+="?"),url+=queryString))),url},
route:function(action,controller,extension,params,rootUrl){var routeParts=[extension,controller,action];if(_.some(routeParts,function(value){return _.isEmpty(value)||!_.isString(value)}))throw new TypeError("All parts are required to build an URL");return rootUrl=rootUrl||context&&context.root_url,this.build([rootUrl].concat(routeParts),params)}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash")):"function"==typeof define&&define.amd?define("util/config",["lodash"],factory):(global=global||self)["util/config"]=factory(global._)}(this,function(_){"use strict";return _=_&&_.hasOwnProperty(
"default")?_.default:_,{build:function(config,defaults){return _.defaults(config||{},defaults)},from:function(source,entries,defaults){var config={};return _.forEach(entries,function(value,name){if(void 0!==source[name])config[name]=source[name];else if(value)throw new Error('The config entry "'+name+'" is required!')}),_.defaults(config,defaults)}}}),define("taoQtiTestPreviewer/previewer/config/item",["lodash","util/url","util/config"],function(_,urlUtil,configHelper){"use strict";var _defaults={bootstrap:{serviceController:"Previewer",serviceExtension:"taoQtiTestPreviewer"}},_entries={serviceCallId:!0,bootstrap:!1,timeout:!1};return function(config){
var storage=configHelper.from(config,_entries,_defaults);return storage.timeout?storage.timeout*=1e3:storage.timeout=void 0,{getParameters:function(itemIdentifier){var type=typeof itemIdentifier,parameters={serviceCallId:this.getServiceCallId()};if("string"==type)parameters.itemUri=itemIdentifier;else if("object"==type&&_.isPlainObject(itemIdentifier))_.merge(parameters,itemIdentifier);else if("undefined"!=type)throw new TypeError("Wrong parameter type provided for itemIdentifier: "+type+". Only string or plain object are allowed!");return parameters},getServiceCallId:function(){return storage.serviceCallId},getServiceController:function(){
return storage.bootstrap.serviceController||_defaults.bootstrap.serviceController},getServiceExtension:function(){return storage.bootstrap.serviceExtension||_defaults.bootstrap.serviceExtension},getTestActionUrl:function(action){return urlUtil.route(action,this.getServiceController(),this.getServiceExtension(),this.getParameters())},getItemActionUrl:function(itemIdentifier,action){return urlUtil.route(action,this.getServiceController(),this.getServiceExtension(),this.getParameters(itemIdentifier))},getTimeout:function(){return storage.timeout}}}}),define("json!taoQtiTestPreviewer/previewer/resources/devices.json",function(){return{tablets:{
"193986c3715c81838870f908fa98d69a":{label:"Amazon Kindle Fire HDX 7″",width:960,height:600},"4e8eafab11aad1486992d7ee2c8c16ca":{label:"Apple iPad",width:1024,height:768},"5aac2932d9ad00d6d8a1604b8f9e4e8d":{label:"Google Nexus 10, Motorola Xoom, Xyboard",width:1280,height:800},"9805d9753ad08c7630a9ee5418aa6c6c":{label:"Google Nexus 7",width:966,height:604},d4a431cedf4705d6bf2cba6d5788378b:{label:"Samsung Galaxy Tab 7.7, 8.9, 10.1",width:1280,height:800}},phones:{"1b89338531ef0155c8d6abc2ac02c81a":{label:"Apple iPhone 3GS",width:320,height:480,scaleFactor:1,dpWidth:320,dpHeight:480},"3f89da99d84214cde7df87ebe0699a6f":{label:"Apple iPhone 4",width:640,
height:960,scaleFactor:2,dpWidth:320,dpHeight:1920},"0d36971a5b98b367f54ced708c9af849":{label:"Apple iPhone 5",width:640,height:1136,scaleFactor:2,dpWidth:320,dpHeight:2272},"026beffcc051af995660ebdede986ace":{label:"BlackBerry Z10",width:768,height:1280,scaleFactor:2,dpWidth:384,dpHeight:2560},fd2dd53e667d6d49e4fa73356fa941dd:{label:"BlackBerry Z30",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"707584c1ae17d9b5b2cbe8603c91c147":{label:"Google Nexus 4",width:768,height:1280,scaleFactor:2,dpWidth:384,dpHeight:2560},"91823264de952e7f2347e07db5c4058b":{label:"Google Nexus 5",width:1080,height:1920,scaleFactor:3,dpWidth:360,dpHeight:5760},
cd69817a6e147e8a4677389e56fcf568:{label:"Google Nexus S",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"75994faa6a38e31e99b53fcd75534a33":{label:"HTC Evo, Touch HD, Desire HD, Desire",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"0cab4dfccdfc880687cb608cfe4159db":{label:"HTC One X, EVO LTE",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},c4ff41fcba24d74fc21dc3490ca1edc9:{label:"HTC Sensation, Evo 3D",width:540,height:960,scaleFactor:1.5,dpWidth:360,dpHeight:1440},fa969a5e0dd2de53700eeee4ba4ba142:{label:"LG Optimus 2X, Optimus 3D, Optimus Black",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200
},"33c4f9364e295ec03531f3a3425819cf":{label:"LG Optimus G",width:768,height:1280,scaleFactor:2,dpWidth:384,dpHeight:2560},bc47f5275f0efd56fee52d43a8082981:{label:"LG Optimus LTE, Optimus 4X HD",width:720,height:1280,scaleFactor:1.7,dpWidth:424,dpHeight:2176},"0732887e6e324fd10777b735520a34cf":{label:"LG Optimus One",width:320,height:480,scaleFactor:1.5,dpWidth:213,dpHeight:720},"2e38a78364f09d0da0e9e1a3a68e7fb0":{label:"Motorola Defy, Droid, Droid X, Milestone",width:480,height:854,scaleFactor:1.5,dpWidth:320,dpHeight:1281},bd4b78dddc7c9625a4141a1b1ddabb87:{label:"Motorola Droid 3, Droid 4, Droid Razr, Atrix 4G, Atrix 2",width:540,height:960,scaleFactor:1,
dpWidth:540,dpHeight:960},"3bf1edf21cfa81006183d2b02974c84e":{label:"Motorola Droid Razr HD",width:720,height:1280,scaleFactor:1,dpWidth:720,dpHeight:1280},ab5a352e0e016b97dac986f06c394f55:{label:"Nokia C5, C6, C7, N97, N8, X7",width:360,height:640,scaleFactor:1,dpWidth:360,dpHeight:640},"4826fb7d7257aeaac992ce699df41b3c":{label:"Nokia Lumia 7X0, Lumia 8XX, Lumia 900, N800, N810, N900",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"0a691ab20add7c432200f8fa6527b488":{label:"Samsung Galaxy Note",width:800,height:1280,scaleFactor:2,dpWidth:400,dpHeight:2560},"9c23ee31be29960fbac9e9bbfc2fc7b0":{label:"Samsung Galaxy Note 3",width:1080,
height:1920,scaleFactor:2,dpWidth:540,dpHeight:3840},"92177c0508c1d73905a58e2338f2a81f":{label:"Samsung Galaxy Note II",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"5222b8866dc4cc606725e16ffcc0a783":{label:"Samsung Galaxy S III, Galaxy Nexus",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"37c1541e2bd55cfd0f4073b0ccdf68b3":{label:"Samsung Galaxy S, S II, W",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"2f7f64b7dda0144907ff300e83eed465":{label:"Samsung Galaxy S4",width:1080,height:1920,scaleFactor:3,dpWidth:360,dpHeight:5760},"9c24f9057744dad56043702a9703127f":{label:"Sony Xperia S, Ion",width:720,
height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"0a8b2732a016a9395c3af5f12dd9c0da":{label:"Sony Xperia Sola, U",width:480,height:854,scaleFactor:1,dpWidth:480,dpHeight:854},"5a153d7f53d82dcb0801f041574a6a43":{label:"Sony Xperia Z, Z1",width:1080,height:1920,scaleFactor:3,dpWidth:360,dpHeight:5760}},screens:{"9e523ae15b61dc766f5c818726881ecf":{label:"1920 × 1080",width:1920,height:1080,dpWidth:1920,dpHeight:1080,scaleFactor:1},"07769cd8d0a7d09818b2f0b018042fb7":{label:"1366 × 768",width:1366,height:768,dpWidth:1366,dpHeight:768,scaleFactor:1},"72d5478a24194f98b9378e8e0fd65737":{label:"1280 × 1024",width:1280,height:1024,dpWidth:1280,dpHeight:1024,
scaleFactor:1},b7a6dd5900cc72e61f0d3479c7e314ec:{label:"1280 × 800",width:1280,height:800,dpWidth:1280,dpHeight:800,scaleFactor:1},"43193b0ff671a37d8232ab664190a125":{label:"1024 × 768",width:1024,height:768,dpWidth:1024,dpHeight:768,scaleFactor:1},c29e48814af5443ff5688d9e967ce917:{label:"800 × 600",width:800,height:600,dpWidth:800,dpHeight:600,scaleFactor:1}}}}),define("taoQtiTestPreviewer/previewer/helpers/devices",["lodash","json!taoQtiTestPreviewer/previewer/resources/devices.json"],function(_,deviceList){"use strict";var deviceTypeMap={mobile:"tablets",desktop:"screens"},devicesHelper={getDevicesByType:function(type){var key=deviceTypeMap[type]
;return _.map(deviceList[key]||[],function(device,identifier){return{value:identifier,label:device.label,width:device.width,height:device.height}})},getMobileDevices:function(){return devicesHelper.getDevicesByType("mobile")},getDesktopDevices:function(){return devicesHelper.getDevicesByType("desktop")}};return devicesHelper}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash")):"function"==typeof define&&define.amd?define("core/delegator",["lodash"],factory):(global=global||self)["core/delegator"]=factory(global._)}(this,function(_){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_
;var defaults={name:"provided",eventifier:!0},_slice=[].slice;return function(api,provider,config){var extendedConfig=_.defaults(config||{},defaults),eventifier=!!(extendedConfig.eventifier&&api&&api.trigger),context=extendedConfig.forward?provider:api,defaultProvider=_.isFunction(extendedConfig.defaultProvider)?extendedConfig.defaultProvider:_.noop,wrapper=_.isFunction(extendedConfig.wrapper)?extendedConfig.wrapper:null,name=extendedConfig.name;return extendedConfig.required&&(defaultProvider=null),function(fnName){var response,args;if(!provider)throw new Error("There is no "+name+" provider!");if(!_.isFunction(provider[fnName])&&!defaultProvider
)throw new Error("There is no method called "+fnName+" in the "+name+" provider!");return args=_slice.call(arguments,1),response=(provider[fnName]||defaultProvider).apply(context,args),wrapper&&(response=wrapper(response)),eventifier&&api.trigger.apply(api,[fnName,response].concat(args)),response}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/delegator"),require("core/promise")):"function"==typeof define&&define.amd?define("core/plugin",["lodash","core/delegator","core/promise"],factory):(global=global||self)["core/plugin"]=factory(global._,global["core/delegator"],
global["core/promise"])}(this,function(_,delegator,Promise){"use strict";return _=_&&_.hasOwnProperty("default")?_.default:_,delegator=delegator&&delegator.hasOwnProperty("default")?delegator.default:delegator,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,function(provider,defaults){var pluginName;if(!_.isPlainObject(provider)||!_.isString(provider.name)||_.isEmpty(provider.name)||!_.isFunction(provider.init))throw new TypeError("A plugin should be defined at least by a name property and an init method");return pluginName=provider.name,defaults=defaults||{},function(host,areaBroker,config){var plugin,delegate,states={},
pluginContent={};if(!_.isObject(host)||!_.isFunction(host.on)||!_.isFunction(host.trigger))throw new TypeError("A plugin host should be a valid eventified object");return config=_.defaults(config||{},defaults),delegate=delegator(plugin={install:function(){var self=this;return delegate("install").then(function(){self.trigger("install")})},init:function(content){var self=this;return states={},content&&(pluginContent=content),delegate("init",content).then(function(){self.setState("init",!0).trigger("init")})},render:function(){var self=this;return delegate("render").then(function(){self.setState("ready",!0).trigger("render").trigger("ready")})},finish:function(
){var self=this;return delegate("finish").then(function(){self.setState("finish",!0).trigger("finish")})},destroy:function(){var self=this;return delegate("destroy").then(function(){config={},states={},self.setState("init",!1),self.trigger("destroy")})},trigger:function(name){var args=[].slice.call(arguments,1);return host.trigger.apply(host,["plugin-"+name+"."+pluginName,plugin].concat(args)),this},getHost:function(){return host},getAreaBroker:function(){return areaBroker},getConfig:function(){return config},setConfig:function(name,value){return _.isPlainObject(name)?config=_.defaults(name,config):config[name]=value,this},getState:function(name){
return!!states[name]},setState:function(name,active){if(!_.isString(name)||_.isEmpty(name))throw new TypeError("The state must have a name");return states[name]=!!active,this},getContent:function(){return pluginContent},setContent:function(content){return pluginContent=content,this},getName:function(){return pluginName},show:function(){var self=this;return delegate("show").then(function(){self.setState("visible",!0).trigger("show")})},hide:function(){var self=this;return delegate("hide").then(function(){self.setState("visible",!1).trigger("hide")})},enable:function(){var self=this;return delegate("enable").then(function(){self.setState("enabled",!0).trigger(
"enable")})},disable:function(){var self=this;return delegate("disable").then(function(){self.setState("enabled",!1).trigger("disable")})}},provider,{eventifier:!1,wrapper:function(response){return Promise.resolve(response)}}),_.isString(defaults.hostName)&&!_.isEmpty(defaults.hostName)&&(plugin["get"+defaults.hostName.charAt(0).toUpperCase()+defaults.hostName.slice(1)]=plugin.getHost),plugin}}}),define("taoQtiTestPreviewer/previewer/plugins/controls/close",["jquery","lodash","i18n","ui/hider","taoTests/runner/plugin","tpl!taoQtiTest/runner/plugins/templates/button"],function($,_,__,hider,pluginFactory,buttonTpl){"use strict";return pluginFactory({
name:"close",init:function(){var self=this,testRunner=this.getTestRunner();this.$element=$(buttonTpl({control:"close",title:__("Close the previewer"),icon:"close",text:__("Close"),className:"context-action"})),this.$element.on("click",function(e){e.preventDefault(),!1!==self.getState("enabled")&&(self.disable(),testRunner.trigger("finish"))}),this.disable(),testRunner.on("enablenav",function(){self.enable()}).on("disablenav",function(){self.disable()})},render:function(){this.getAreaBroker().getArea("context").append(this.$element)},destroy:function(){this.$element.remove()},enable:function(){this.$element.removeProp("disabled").removeClass("disabled")},
disable:function(){this.$element.prop("disabled",!0).addClass("disabled")},show:function(){hider.show(this.$element)},hide:function(){hider.hide(this.$element)}})}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("util/strPad",factory):(global=global||self)["util/strPad"]=factory()}(this,function(){"use strict";return function(input,pad_length,pad_string,pad_type){function str_pad_repeater(s,len){for(var collect="";collect.length<len;)collect+=s;return collect=collect.substr(0,len)}var pad_to_go,half="";return input=input.toString(),
pad_string=void 0!==pad_string?pad_string:" ","STR_PAD_LEFT"!==pad_type&&"STR_PAD_RIGHT"!==pad_type&&"STR_PAD_BOTH"!==pad_type&&(pad_type="STR_PAD_RIGHT"),0<(pad_to_go=pad_length-(input+="").length)&&("STR_PAD_LEFT"===pad_type?input=str_pad_repeater(pad_string,pad_to_go)+input:"STR_PAD_RIGHT"===pad_type?input+=str_pad_repeater(pad_string,pad_to_go):"STR_PAD_BOTH"===pad_type&&(input=(input=(half=str_pad_repeater(pad_string,Math.ceil(pad_to_go/2)))+input+half).substr(0,pad_length))),input}}),define("tpl!taoQtiTestPreviewer/previewer/plugins/navigation/submit/preview-console",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,
partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),{},'<div class="preview-console hidden">\n    <ul class="preview-console-body"></ul>\n</div>'})}),define("tpl!taoQtiTestPreviewer/previewer/plugins/navigation/submit/preview-console-line",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<li><pre><span class="log-time">',buffer+=escapeExpression((helper=helpers.time)?helper.call(depth0,{hash:{},
data:data}):"function"==typeof(helper=depth0&&depth0.time)?helper.call(depth0,{hash:{},data:data}):helper)+'</span><span class="log-type">',buffer+=escapeExpression((helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.type)?helper.call(depth0,{hash:{},data:data}):helper)+'</span><span class="log-message">',buffer+=escapeExpression((helper=helpers.message)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.message)?helper.call(depth0,{hash:{},data:data}):helper)+"</span></pre></li>"})}),define("tpl!taoQtiTestPreviewer/previewer/plugins/navigation/submit/preview-console-closer",[
"handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing;return buffer+='<span class="icon-close preview-console-closer hidden" title="'+(0,this.escapeExpression)((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Close console",options):helperMissing.call(depth0,"__","Close console",options)))+'"></span>'})}),define("taoQtiTestPreviewer/previewer/plugins/navigation/submit/submit",["jquery","lodash","i18n","moment","ui/hider",
"ui/autoscroll","util/strPad","taoTests/runner/plugin","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","tpl!taoQtiTest/runner/plugins/templates/button","tpl!taoQtiTestPreviewer/previewer/plugins/navigation/submit/preview-console","tpl!taoQtiTestPreviewer/previewer/plugins/navigation/submit/preview-console-line","tpl!taoQtiTestPreviewer/previewer/plugins/navigation/submit/preview-console-closer"],function($,_,__,moment,hider,autoscroll,strPad,pluginFactory,pciResponse,buttonTpl,consoleTpl,consoleLineTpl,consoleCloserTpl){"use strict";return pluginFactory({name:"submit",init:function(){var self=this,testRunner=this.getTestRunner();function isPluginAllowed(
){return!testRunner.getConfig().readOnly}function showConsole(){hider.show(self.controls.$console),hider.show(self.controls.$consoleBody),hider.show(self.controls.$consoleCloser),autoscroll(self.controls.$consoleBody.children().last(),self.controls.$consoleBody)}function showResponses(type,responses){_.forEach(responses,function(response,identifier){!function(type,message){var data={time:strPad(moment().format("HH:mm:ss"),12," "),type:strPad(type||"",18," "),message:strPad(message||"",18," ")};self.controls.$consoleBody.append($(consoleLineTpl(data)))}(type,strPad(identifier+": ",15," ")+_.escape(pciResponse.prettyPrint(response)))})}this.controls={
$button:$(buttonTpl({control:"submit",title:__("Submit and show the result"),icon:"forward",text:__("Submit")})),$console:$(consoleTpl()),$consoleCloser:$(consoleCloserTpl())},this.controls.$consoleBody=this.controls.$console.find(".preview-console-body"),this.controls.$button.on("click",function(e){e.preventDefault(),!1!==self.getState("enabled")&&(self.disable(),testRunner.trigger("submititem"))}),this.controls.$consoleCloser.on("click",function(e){e.preventDefault(),hider.hide(self.controls.$console),hider.hide(self.controls.$consoleCloser)}),isPluginAllowed()||this.hide(),this.disable(),testRunner.on("render",function(){isPluginAllowed()?self.show(
):self.hide()}).on("submitresponse",function(responses){showResponses(__("Submitted data"),responses),showConsole()}).on("scoreitem",function(responses){responses.itemSession&&(showResponses(__("Output data"),responses.itemSession),showConsole())}).on("enablenav",function(){self.enable()}).on("disablenav",function(){self.disable()})},render:function(){var $container=this.getAreaBroker().getContainer(),$navigation=this.getAreaBroker().getNavigationArea();$navigation.append(this.controls.$button),$navigation.append(this.controls.$consoleCloser),$container.append(this.controls.$console)},destroy:function(){_.forEach(this.controls,function($el){$el.remove()}),
this.controls=null},enable:function(){this.controls.$button.removeProp("disabled").removeClass("disabled")},disable:function(){this.controls.$button.prop("disabled",!0).addClass("disabled")},show:function(){hider.show(this.controls.$button)},hide:function(){_.forEach(this.controls,hider.hide)}})}),define("tpl!taoQtiTestPreviewer/previewer/plugins/tools/scale/component/tpl/devices-previewer",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression
;return buffer+='<div class="devices-previewer" data-type="',buffer+=escapeExpression((helper=helpers.deviceType)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.deviceType)?helper.call(depth0,{hash:{},data:data}):helper)+'" data-orientation="',buffer+=escapeExpression((helper=helpers.deviceOrientation)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.deviceOrientation)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    <div class="preview-container">\n        <div class="preview-frame">\n            <div class="preview-content">\n            </div>\n        </div>\n    </div>\n</div>'})}
),define("css!taoQtiTestPreviewer/previewer/plugins/tools/scale/component/css/devicesPreviewer",[],function(){}),define("taoQtiTestPreviewer/previewer/plugins/tools/scale/component/devicesPreviewer",["jquery","lodash","i18n","ui/component","ui/transformer","tpl!taoQtiTestPreviewer/previewer/plugins/tools/scale/component/tpl/devices-previewer","css!taoQtiTestPreviewer/previewer/plugins/tools/scale/component/css/devicesPreviewer.css"],function($,_,__,componentFactory,transformer,devicesPreviewerTpl){"use strict";var defaults={deviceType:"standard",deviceWith:0,deviceHeight:0,deviceOrientation:null};return function(container,config){var controls=null,
resetScale=function(){controls&&(controls.$previewContent.removeAttr("style"),controls.$previewContainer.removeAttr("style"))},devicesPreviewer=componentFactory({getDeviceWidth:function(){return this.getConfig().deviceWidth},setDeviceWidth:function(width){var componentConfig=this.getConfig();return componentConfig.deviceWidth=parseInt(width,10)||0,this.trigger("devicewidthchange",componentConfig.deviceWidth),this},getDeviceHeight:function(){return this.getConfig().deviceHeight},setDeviceHeight:function(height){var componentConfig=this.getConfig();return componentConfig.deviceHeight=parseInt(height,10)||0,this.trigger("deviceheightchange",
componentConfig.deviceHeight),this},getDeviceOrientation:function(){return this.getConfig().deviceOrientation},setDeviceOrientation:function(orientation){var componentConfig=this.getConfig();return componentConfig.deviceOrientation=orientation,this.is("rendered")&&this.getElement().attr("data-orientation",componentConfig.deviceOrientation),this.trigger("deviceorientationchange",componentConfig.deviceOrientation),this},isDeviceMode:function(){return"standard"!==this.getDeviceType()},getDeviceType:function(){return this.getConfig().deviceType},setDeviceType:function(type){var componentConfig=this.getConfig();return componentConfig.deviceType=type,this.is(
"rendered")&&this.getElement().attr("data-type",componentConfig.deviceType),this.trigger("devicetypechange",componentConfig.deviceType),this},previewDevice:function(){var width,height;return this.is("rendered")&&(this.is("disabled")||"standard"===this.getDeviceType()?this.clearScale():(height="portrait"===this.getDeviceOrientation()?(width=this.getDeviceHeight(),this.getDeviceWidth()):(width=this.getDeviceWidth(),this.getDeviceHeight()),this.applyScale(width,height)),this.trigger("devicepreview")),this},clearScale:function(){return this.is("rendered")&&(resetScale(),this.trigger("scaleclear")),this},applyScale:function(width,height){var frameSize,
frameMargins,scaleFactor;return this.is("rendered")&&(resetScale(),frameSize=this.getFrameSize(),frameMargins=this.getFrameMargins(),scaleFactor=this.getScaleFactor(width,height),controls.$previewContent.width(width).height(height),controls.$previewContainer.css("left",(frameSize.width-(width+frameMargins.width)*scaleFactor)/2).width(width+frameMargins.width).height(height+frameMargins.height),transformer.setTransformOrigin(controls.$previewContainer,0,0),transformer.scale(controls.$previewContainer,scaleFactor),this.trigger("scalechange")),this},getFrameMargins:function(){var margins={width:0,height:0};return this.is("rendered")&&(
margins.width=controls.$previewContainer.outerWidth()-controls.$previewContent.width(),margins.height=controls.$previewContainer.outerHeight()-controls.$previewContent.height()),margins},getFrameSize:function(){var size={width:0,height:0};return this.is("rendered")&&(size.width=this.getContainer().innerWidth(),size.height=this.getContainer().innerHeight()),size},getScaleFactor:function(width,height){var margins,frameSize,scaleFactor={x:1,y:1};return this.is("rendered")&&this.isDeviceMode()&&(frameSize=this.getFrameSize(),width+=(margins=this.getFrameMargins()).width,height+=margins.height,width>frameSize.width&&(scaleFactor.x=frameSize.width/width),
height>frameSize.height&&(scaleFactor.y=frameSize.height/height)),Math.min(scaleFactor.x,scaleFactor.y)},wrap:function(element){return this.is("rendered")&&(this.unwrap(),controls.$wrappedElement=$(element),controls.$wrappedElementContainer=controls.$wrappedElement.parent(),controls.$previewContent.append(controls.$wrappedElement),this.trigger("wrap",controls.$wrappedElement)),this},unwrap:function(){var $wasWrappedElement;return this.is("rendered")&&controls.$wrappedElement&&($wasWrappedElement=controls.$wrappedElement,controls.$wrappedElementContainer.append(controls.$wrappedElement),controls.$wrappedElement=null,controls.$wrappedElementContainer=null,
this.trigger("unwrap",$wasWrappedElement)),this}},defaults).setTemplate(devicesPreviewerTpl).on("init",function(){var componentConfig=this.getConfig();this.setDeviceType(componentConfig.deviceType),this.setDeviceWidth(componentConfig.deviceWidth),this.setDeviceHeight(componentConfig.deviceHeight),this.setDeviceOrientation(componentConfig.deviceOrientation),_.defer(function(){devicesPreviewer.render(container)})}).on("render",function(){var $element=this.getElement();controls={$previewContainer:$element.find(".preview-container"),$previewFrame:$element.find(".preview-frame"),$previewContent:$element.find(".preview-content"),$wrappedElement:null,
$wrappedElementContainer:null},this.trigger("ready")}).on("disable enable",function(){var self=this;this.is("rendered")&&_.defer(function(){self.previewDevice()})}).on("destroy",function(){this.unwrap(),controls=null});return _.defer(function(){devicesPreviewer.init(config)}),devicesPreviewer}}),define("tpl!taoQtiTestPreviewer/previewer/plugins/tools/scale/component/tpl/devices-selector",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),{},
'<div class="devices-selector" data-type="standard">\n    <div class="selector type-selector"></div>\n    <div class="selector desktop-selector"></div>\n    <div class="selector mobile-selector"></div>\n    <div class="selector orientation-selector"></div>\n</div>'})}),define("tpl!taoQtiTestPreviewer/previewer/plugins/tools/scale/component/tpl/selector",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;function program2(
depth0,data){return'selected="selected"'}return buffer+='<select class="select2" name="',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-category="',stack1=(helper=helpers.category)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.category)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-has-search="false">\n    ',!(stack1=helpers.each.call(depth0,depth0&&depth0.items,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,
data){var stack1,helper,buffer="";return buffer+='\n    <option value="',stack1=(helper=helpers.value)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.value)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',!(stack1=helpers.if.call(depth0,depth0&&depth0.selected,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))&&0!==stack1||(buffer+=stack1),buffer+=">",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+"</option>\n    "},data),data:data}))&&0!==stack1||(buffer+=stack1),buffer+="\n</select>"})}),define("css!taoQtiTestPreviewer/previewer/plugins/tools/scale/component/css/devicesSelector",[],function(){}),define("taoQtiTestPreviewer/previewer/plugins/tools/scale/component/devicesSelector",["jquery","lodash","i18n","ui/component","ui/selecter","taoQtiTestPreviewer/previewer/helpers/devices","tpl!taoQtiTestPreviewer/previewer/plugins/tools/scale/component/tpl/devices-selector","tpl!taoQtiTestPreviewer/previewer/plugins/tools/scale/component/tpl/selector","css!taoQtiTestPreviewer/previewer/plugins/tools/scale/component/css/devicesSelector.css"],function($,_,__
,componentFactory,lookupSelecter,devicesHelper,devicesSelectorTpl,selectorTpl){"use strict";var defaults={type:"standard",device:null,orientation:"landscape"},deviceTypesList=[{value:"standard",label:__("Actual size"),devicesList:!1,orientation:!1},{value:"desktop",label:__("Desktop preview"),devicesList:!0,orientation:!1},{value:"mobile",label:__("Mobile preview"),devicesList:!0,orientation:!0}],deviceOrientationsList=[{value:"landscape",label:__("Landscape")},{value:"portrait",label:__("Portrait")}],callbackMap={type:"setType",device:"setDevice",mobile:"setDevice",desktop:"setDevice",orientation:"setOrientation"};function getSelectorData(selected,list){
return selected&&_.size(list)&&_.find(list,{value:selected})||null}function getValidIdentifier(identifier,list){return list&&list.length?_.find(list,{value:identifier})?identifier:_.first(list).value:null}function updateSelect2($selector,value){return $selector.val()!==value&&($selector.val(value),$selector.trigger("change")),$selector}function removeSelect2($selector){return $selector.hasClass("select2-offscreen")&&$selector.select2("destroy"),$selector}return function(container,config){var selected={type:null,device:null,orientation:null,desktop:null,mobile:null},devicesList=[],typeData=null,controls=null,setControlsProp=function(property,value){_.forEach(
controls,function($selector){$selector.prop(property,value)})},devicesSelector=componentFactory({isDeviceMode:function(){return"standard"!==selected.type},updateMode:function(){return this.is("rendered")&&this.getElement().attr("data-type",selected.type),this},getType:function(){return selected.type},getOrientation:function(){return typeData&&typeData.orientation?selected.orientation:null},getDevice:function(){return typeData&&typeData.devicesList?selected.device:null},getDeviceData:function(){return getSelectorData(this.getDevice(),devicesList)},setType:function(identifier){return(identifier=getValidIdentifier(identifier,deviceTypesList))!==selected.type&&(
selected.type=identifier,selected.device=null,devicesList=devicesHelper.getDevicesByType(selected.type),typeData=getSelectorData(selected.type,deviceTypesList),this.is("rendered")&&(updateSelect2(controls.$typeSelector,selected.type),this.updateMode()),this.trigger("typechange",selected.type),typeData.devicesList&&this.setDevice(selected[selected.type])),this},setOrientation:function(identifier){return(identifier=getValidIdentifier(identifier,deviceOrientationsList))!==selected.orientation&&(selected.orientation=identifier,this.is("rendered")&&updateSelect2(controls.$orientationSelector,selected.orientation),this.trigger("orientationchange",
selected.orientation)),this},setDevice:function(identifier){var $selector;return(identifier=getValidIdentifier(identifier,devicesList))!==selected.device&&(selected.device=identifier,selected[selected.type]=identifier,this.is("rendered")&&this.isDeviceMode()&&($selector=controls["$"+selected.type+"Selector"])&&updateSelect2($selector,selected.device),this.trigger("devicechange",selected.device,this.getDeviceData())),this},select:function(name,value){var setterName=callbackMap[name];return setterName&&_.isFunction(this[setterName])&&this[setterName](value),this},reset:function(){var componentConfig=this.getConfig();return this.setType(componentConfig.type),
this.setDevice(componentConfig.device),this.setOrientation(componentConfig.orientation),this}},defaults).setTemplate(devicesSelectorTpl).on("init",function(){this.reset(),_.defer(function(){devicesSelector.render(container)})}).on("render",function(){var self=this;function renderSelector(name,list,selectedValue,category){var $selector=$(selectorTpl({name:name,category:category||name,items:_.map(list,function(item){return{value:item.value,label:item.label,selected:selectedValue===item.value}})}));return self.getElement().find("."+name+"-selector").html($selector),$selector}controls={$typeSelector:renderSelector("type",deviceTypesList,selected.type),
$desktopSelector:renderSelector("desktop",devicesHelper.getDesktopDevices(),selected.device,"device"),$mobileSelector:renderSelector("mobile",devicesHelper.getMobileDevices(),selected.device,"device"),$orientationSelector:renderSelector("orientation",deviceOrientationsList,selected.orientation)},lookupSelecter(this.getElement()),this.getElement().on("change",".selector",function(e){var $selector=$(e.target).closest("select");self.select($selector.attr("name"),$selector.val())}),this.updateMode(),this.trigger("ready")}).on("disable",function(){this.is("rendered")&&setControlsProp("disabled",!0)}).on("enable",function(){this.is("rendered")&&setControlsProp(
"disabled",!1)}).on("destroy",function(){_.forEach(controls,removeSelect2),devicesList=typeData=selected=controls=null});return _.defer(function(){devicesSelector.init(config)}),devicesSelector}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash")):"function"==typeof define&&define.amd?define("util/namespace",["lodash"],factory):(global=global||self)["util/namespace"]=factory(global._)}(this,function(_){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_;var reSplit=/\s/g,namespaceHelper={split:function(names,normalize){return!_.isString(names)||_.isEmpty(names)?[]:(normalize&&(
names=names.toLowerCase()),_(names.trim().split(reSplit)).compact().uniq().value())},getName:function(namespaced){return!_.isString(namespaced)||_.isEmpty(namespaced)?"":-1<namespaced.indexOf(".")?namespaced.substr(0,namespaced.indexOf(".")):namespaced},getNamespace:function(namespaced,defaultNs){return!_.isString(namespaced)||_.isEmpty(namespaced)?"":-1<namespaced.indexOf(".")?namespaced.substr(namespaced.indexOf(".")+1):defaultNs||"@"},namespaceAll:function(names,namespace,normalize){var suffix;return _.isArray(names)||(names=namespaceHelper.split(names,normalize)),normalize&&(namespace=namespace.toLowerCase()),suffix=namespace?"."+namespace:"",_(names
).map(function(sh){return sh.indexOf(".")<0?sh+suffix:sh}).compact().uniq().value().join(" ")}};return namespaceHelper}),define("taoQtiTestPreviewer/previewer/plugins/tools/scale/scale",["jquery","lodash","lib/uuid","util/namespace","taoTests/runner/plugin","taoQtiTestPreviewer/previewer/plugins/tools/scale/component/devicesPreviewer","taoQtiTestPreviewer/previewer/plugins/tools/scale/component/devicesSelector"],function($,_,uuid,namespaceHelper,pluginFactory,devicesPreviewerFactory,devicesSelectorFactory){"use strict";return pluginFactory({name:"scale",init:function(){var self=this,testRunner=this.getTestRunner();function isPluginAllowed(){
return!testRunner.getConfig().readOnly}this.nsId=this.getName()+uuid(6),isPluginAllowed()||this.hide(),this.disable(),testRunner.on("render",function(){isPluginAllowed()?self.show():self.hide()}).on("resizeitem",function(size,orientation,type){self.devicesPreviewer&&self.devicesPreviewer.setDeviceType(type).setDeviceOrientation(orientation).setDeviceWidth(size&&size.width).setDeviceHeight(size&&size.height).previewDevice()}).on("enablenav",function(){self.enable()}).on("disablenav",function(){self.disable()})},render:function(){var self=this,testRunner=this.getTestRunner(),areaBroker=this.getAreaBroker();function resizeItem(){
self.devicesSelector&&self.getState("enabled")&&testRunner.trigger("resizeitem",self.devicesSelector.getDeviceData(),self.devicesSelector.getOrientation(),self.devicesSelector.getType())}return $(window).on(namespaceHelper.namespaceAll("resize orientationchange",this.nsId),_.throttle(function(){self.devicesSelector&&self.devicesSelector.isDeviceMode()&&resizeItem()},50)),Promise.all([new Promise(function(resolve){self.devicesSelector=devicesSelectorFactory(areaBroker.getHeaderArea()).on("ready",function(){self.getState("enabled")||this.disable(),this.on("typechange",function(){this.isDeviceMode()||resizeItem()}),this.on("devicechange orientationchange",
function(){resizeItem()}),resolve()})}),new Promise(function(resolve){self.devicesPreviewer=devicesPreviewerFactory(areaBroker.getArea("contentWrapper")).on("ready",function(){this.wrap(areaBroker.getContentArea()),resolve()})})])},destroy:function(){this.nsId&&$(window).off("."+this.nsId),this.devicesSelector&&this.devicesSelector.destroy(),this.devicesPreviewer&&this.devicesPreviewer.destroy(),this.devicesSelector=null,this.devicesPreviewer=null},enable:function(){this.devicesSelector&&this.devicesSelector.enable()},disable:function(){this.devicesSelector&&this.devicesSelector.disable()},show:function(){this.devicesSelector&&this.devicesSelector.show()},
hide:function(){this.devicesSelector&&this.devicesSelector.hide()}})}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("core/eventifier"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/promiseQueue",["lodash","core/promise","core/eventifier","lib/uuid"],factory):(global=global||self)["core/promiseQueue"]=factory(global._,global["core/promise"],global["core/eventifier"],global["lib/uuid"])}(this,function(_,Promise,eventifier,uuid){"use strict";return _=_&&_.hasOwnProperty("default")?_.default:_,
Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier.default:eventifier,uuid=uuid&&uuid.hasOwnProperty("default")?uuid.default:uuid,function(){function getId(){var id="promise-"+uuid(6);return void 0===queue[id]?id:getId()}var queue={};return{add:function(promise){return queue[getId()]=promise,this},getValues:function(){return _.values(queue)},clear:function(){return queue={},this},serie:function(promiseFn){var id=getId(),currentQueue=this.getValues(),emitter=eventifier();return queue[id]=new Promise(function(resolve){emitter.on("fulfilled",resolve)}),Promise.all(
currentQueue).then(function(){if(_.isFunction(promiseFn))return promiseFn()}).then(function(data){return emitter.trigger("fulfilled"),delete queue[id],data}).catch(function(err){throw queue={},err})}}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("core/promiseQueue"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/localstorage",["lodash","core/promise","core/promiseQueue","lib/uuid"],factory):(global=global||self)["core/store/localstorage"]=factory(global._,global["core/promise"],global["core/promiseQueue"],
global["lib/uuid"])}(this,function(_,Promise,promiseQueue,uuid){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,promiseQueue=promiseQueue&&promiseQueue.hasOwnProperty("default")?promiseQueue.default:promiseQueue,uuid=uuid&&uuid.hasOwnProperty("default")?uuid.default:uuid;var storage=window.localStorage,writingQueue=promiseQueue(),setEntry=function(storeName,key,value){return new Promise(function(resolve,reject){try{storage.setItem("tao-store-"+storeName+"."+key,JSON.stringify(value)),resolve(!0)}catch(ex){reject(ex)}})},getEntry=function(storeName,key){return new Promise(
function(resolve,reject){var value;try{null===(value=storage.getItem("tao-store-"+storeName+"."+key))?resolve():resolve(JSON.parse(value))}catch(ex){reject(ex)}})},getKnownStores=function(){return getEntry("index","stores")},localStorageBackend=function(storeName){var name,registered=!1,openStore=function(){return registered?Promise.resolve():function(storeName){return getKnownStores().then(function(stores){return(stores=stores||{})[storeName]={name:storeName,lastOpen:Date.now()},setEntry("index","stores",stores)})}(storeName).then(function(){registered=!0})};if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required")
;return name="tao-store-"+storeName+".",{getItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return getEntry(storeName,key)})})},setItem:function(key,value){return writingQueue.serie(function(){return openStore().then(function(){return setEntry(storeName,key,value)})})},removeItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return storage.removeItem(name+key),!0})})},getItems:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(
function(key){return keyPattern.test(key)}).reduce(function(acc,key){var value,exposedKey=key.replace(name,"");try{null!==(value=storage.getItem(key))&&(acc[exposedKey]=JSON.parse(value))}catch(ex){acc[exposedKey]=null}return acc},{})})})},clear:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){return keyPattern.test(key)}).forEach(function(key){storage.removeItem(key)}),!0})})},removeStore:function(){return this.clear().then(function(){return function(storeName){return getKnownStores().then(
function(stores){return delete(stores=stores||{})[storeName],setEntry("index","stores",stores)})}(storeName)})}}};return localStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(stores){var removing=_(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store&&store.name?localStorageBackend(store.name).removeStore():Promise.resolve()}).value();return Promise.all(removing)})},localStorageBackend.getAll=function(validate){return getKnownStores().then(function(stores){return _(stores).filter(function(store,storeName){
return!validate||validate(storeName,store)}).map(function(store){return store.name}).value()})},localStorageBackend.getStoreIdentifier=function(){var idStore=localStorageBackend("id");return idStore.getItem("id").then(function(id){return _.isEmpty(id)?(id=uuid(),idStore.setItem("id",id).then(function(){return id})):id})},localStorageBackend}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("lib/store/idbstore"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/indexeddb",["lodash","core/promise","lib/store/idbstore","lib/uuid"],
factory):(global=global||self)["core/store/indexeddb"]=factory(global._,global["core/promise"],global["lib/store/idbstore"],global["lib/uuid"])}(this,function(_,Promise,IDBStore,uuid){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,IDBStore=IDBStore&&IDBStore.hasOwnProperty("default")?IDBStore.default:IDBStore,uuid=uuid&&uuid.hasOwnProperty("default")?uuid.default:uuid;var knownStores,isIndexedDB2="getAll"in IDBObjectStore.prototype,openStore=function(storeName){return new Promise(function(resolve,reject){var store=new IDBStore({dbVersion:1,storeName:storeName,
storePrefix:"tao-store-",keyPath:"key",autoIncrement:!0,onStoreReady:function(){store.db.onversionchange=function(e){e&&e.newVersion||store.db.close()},resolve(store)},onError:reject})})},setEntry=function(store,key,value){return new Promise(function(resolve,reject){var entry={key:key,value:value};store.put(entry,function(returnKey){resolve(returnKey===key)},reject)})},getEntry=function(store,key){return new Promise(function(resolve,reject){store.get(key,function(entry){if(!entry||void 0===entry.value)return resolve(entry);resolve(entry.value)},reject)})},removeEntry=function(store,key){return new Promise(function(resolve,reject){store.remove(key,function(
result){resolve(!1!==result)},reject)})},getKnownStores=function(){return knownStores=knownStores||openStore("index")},deleteStore=function(store,storeName){return new Promise(function(resolve,reject){var success=function(){(function(storeName){return getKnownStores().then(function(store){return removeEntry(store,storeName)})})(storeName).then(function(){resolve(!0)}).catch(reject)};isIndexedDB2?store.deleteDatabase(success,reject):store.clear(success,reject)})},indexDbBackend=function(storeName){var innerStore,writePromise,getStore=function(){return innerStore=innerStore||openStore(storeName).then(function(store){return function(storeName){
return getKnownStores().then(function(store){return setEntry(store,storeName,{name:storeName,lastOpen:Date.now()})})}(storeName).then(function(){return Promise.resolve(store)})})},ensureSerie=function(getWritingPromise){return writePromise?new Promise(function(resolve,reject){function runWrite(){var p=getWritingPromise();(writePromise=p).then(resolve).catch(reject)}writePromise.then(runWrite).catch(runWrite)}):writePromise=getWritingPromise()};if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return{getItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return getEntry(store,
key)})})},setItem:function(key,value){return ensureSerie(function(){return getStore().then(function(store){return setEntry(store,key,value)})})},removeItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return removeEntry(store,key)})})},getItems:function(){return ensureSerie(function(){return getStore().then(function(store){return function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){if(!_.isArray(entries))return resolve({});resolve(_.reduce(entries,function(acc,entry){return entry.key&&entry.value&&(acc[entry.key]=entry.value),acc},{}))},reject)})}(store)})})},clear:function(){
return ensureSerie(function(){return getStore().then(function(store){return new Promise(function(resolve,reject){store.clear(function(){resolve(!0)},reject)})})})},removeStore:function(){return ensureSerie(function(){return getStore().then(function(store){return deleteStore(store,storeName)})})}}};return indexDbBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){var all=[];_.forEach(entries,function(entry){var storeName=entry&&entry.key;storeName&&all.push(openStore(storeName).then(function(storeToRemove){if(
!validate||validate(storeName,entry.value))return deleteStore(storeToRemove,storeName)}))}),Promise.all(all).then(resolve).catch(reject)},reject)})})},indexDbBackend.getAll=function(validate){return _.isFunction(validate)||(validate=function(){return!0}),getKnownStores().then(function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){var storeNames=_(entries).filter(function(entry){return entry&&entry.key&&validate(entry.key,entry.value)}).map(function(entry){return entry.key}).value();return resolve(storeNames)},reject)})})},indexDbBackend.getStoreIdentifier=function(){return openStore("id").then(function(store){
return getEntry(store,"id").then(function(id){return _.isEmpty(id)?(id=uuid(),setEntry(store,"id",id).then(function(){return id})):id})})},indexDbBackend}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/memory",["lodash","core/promise","lib/uuid"],factory):(global=global||self)["core/store/memory"]=factory(global._,global["core/promise"],global["lib/uuid"])}(this,function(_,Promise,uuid){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty(
"default")?Promise.default:Promise,uuid=uuid&&uuid.hasOwnProperty("default")?uuid.default:uuid;var idStore,memoryStore={},memoryStorageBackend=function(storeName){if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return memoryStore[storeName]=memoryStore[storeName]||{},{getItem:function(key){return _.isPlainObject(memoryStore[storeName])?Promise.resolve(memoryStore[storeName][key]):Promise.resolve()},setItem:function(key,value){return _.isPlainObject(memoryStore[storeName])||(memoryStore[storeName]={}),memoryStore[storeName][key]=value,Promise.resolve(!0)},removeItem:function(key){
return memoryStore[storeName]=_.omit(memoryStore[storeName],key),Promise.resolve(void 0===memoryStore[storeName][key])},getItems:function(){return Promise.resolve(memoryStore[storeName])},clear:function(){return memoryStore[storeName]={},Promise.resolve(!0)},removeStore:function(){return memoryStore=_.omit(memoryStore,storeName),Promise.resolve(void 0===memoryStore[storeName])}}};return memoryStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),memoryStore=_.omit(memoryStore,function(store,storeName){return!validate||validate(storeName)}),Promise.resolve(!0)},memoryStorageBackend.getAll=function(validate){var storeNames
;return _.isFunction(validate)||(validate=null),storeNames=_(memoryStore).map(function(store,storeName){return storeName}).filter(function(storeName){return!validate||validate(storeName)}).value(),Promise.resolve(storeNames)},memoryStorageBackend.getStoreIdentifier=function(){return _.isEmpty(idStore)&&(idStore=uuid()),Promise.resolve(idStore)},memoryStorageBackend}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("moment"),require("module"),require("core/logger"),require("core/promise"),require("core/store/localstorage"),require("core/store/indexeddb"),require("core/store/memory"
)):"function"==typeof define&&define.amd?define("core/store",["lodash","moment","module","core/logger","core/promise","core/store/localstorage","core/store/indexeddb","core/store/memory"],factory):(global=global||self)["core/store"]=factory(global._,global.moment,global.module,global["core/logger"],global["core/promise"],global["core/store/localstorage"],global["core/store/indexeddb"],global["core/store/memory"])}(this,function(_,moment,module,loggerFactory,Promise,localStorageBackend,indexedDBBackend,memoryBackend){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,moment=moment&&moment.hasOwnProperty("default")?moment.default:moment,
module=module&&module.hasOwnProperty("default")?module.default:module,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory.default:loggerFactory,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,localStorageBackend=localStorageBackend&&localStorageBackend.hasOwnProperty("default")?localStorageBackend.default:localStorageBackend,indexedDBBackend=indexedDBBackend&&indexedDBBackend.hasOwnProperty("default")?indexedDBBackend.default:indexedDBBackend,memoryBackend=memoryBackend&&memoryBackend.hasOwnProperty("default")?memoryBackend.default:memoryBackend;var store,supportsIndexedDB=!1,dectectionDone=!1,
quotaChecked=!1,backendApi=["removeAll","getAll","getStoreIdentifier"],storeApi=["getItem","setItem","removeItem","getItems","clear","removeStore"],logger=loggerFactory("core/store"),config=_.defaults(module.config()||{},{lowSpaceRatio:80,invalidation:{staled:"P2W",oldster:"P2M"}}),isIndexDBSupported=function(){return dectectionDone?Promise.resolve(supportsIndexedDB):new Promise(function(resolve){var test,indexedDB,done=function(result){return dectectionDone=!0,resolve(supportsIndexedDB=!!result)};try{if(!(indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB))return done(!1);(test=indexedDB.open(
"__feature_test",1)).onsuccess=function(){if(test.result)return test.result.close(),done(!0)},test.onerror=function(e){return e.preventDefault(),done(!1),!1}}catch(err){done(!1)}})},loadBackend=function(preselectedBackend){return isIndexDBSupported().then(function(){var backend=preselectedBackend||(supportsIndexedDB?indexedDBBackend:localStorageBackend);return _.isFunction(backend)?function(backend){return _.all(backendApi,function(method){return _.isFunction(backend[method])})}(backend)?(backend!==memoryBackend&&(!quotaChecked&&"storage"in window.navigator&&window.navigator.storage.estimate&&window.navigator.storage.estimate().then(function(estimate){
var usedRatio=0;_.isNumber(estimate.usage)&&_.isNumber(estimate.quota)&&0<estimate.quota&&((usedRatio=estimate.usage/estimate.quota)>config.lowSpaceRatio?(logger.warn("The browser storage is getting low "+usedRatio.toFixed(2)+"% used",estimate),logger.warn("We will attempt to clean oldster databases in persistent backends"),store.cleanUpSpace(config.invalidation.oldster,[],localStorageBackend),store.cleanUpSpace(config.invalidation.oldster,[],indexedDBBackend)):logger.debug("Browser storage estimate : "+usedRatio.toFixed(2)+"% used",estimate))}).catch(function(err){logger.warn("Unable to retrieve quotas : "+err.message)}),quotaChecked=!0),backend
):Promise.reject(new TypeError("This backend doesn't comply with the store backend API")):Promise.reject(new TypeError("No backend, no storage!"))})};return(store=function(storeName,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){var storeInstance=backend(storeName);return function(storage){return _.all(storeApi,function(method){return _.isFunction(storage[method])})}(storeInstance)?storeInstance:Promise.reject(new TypeError("The store doesn't comply with the Storage interface"))})}).backends={localStorage:localStorageBackend,indexedDB:indexedDBBackend,memory:memoryBackend},store.removeAll=function(validate,
preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.removeAll(validate)})},store.cleanUpSpace=function(since,storeNamePattern,preselectedBackend){var tsThreshold;return tsThreshold=_.isNumber(since)&&0<since?since:(_.isString(since)||(since=config.invalidation.oldster),moment().subtract(moment.duration(since)).valueOf()),logger.info("Trying to remove stores lastly opened before "+tsThreshold+"("+since+")"),store.removeAll(function(storeName,storeEntry){return!(!storeName||!storeEntry)&&(!(storeNamePattern instanceof RegExp&&!storeNamePattern.test(storeName))&&(_.isNumber(storeEntry.lastOpen)&&_.isNumber(
tsThreshold)&&storeEntry.lastOpen<=tsThreshold))},preselectedBackend)},store.getAll=function(validate,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getAll(validate)})},store.getIdentifier=function(preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getStoreIdentifier()})},store}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("core/store")):"function"==typeof define&&define.amd?define("core/cachedStore",["core/store"],factory):(global=global||self)["core/cachedStore"]=factory(global["core/store"])}(this
,function(store){"use strict";store=store&&store.hasOwnProperty("default")?store.default:store;return function(storageName,storageKey){return storageKey=storageKey||"cachedData",store(storageName).then(function(storage){return storage.getItem(storageKey).then(function(data){return data=data||{},{getItem:function(name){return data[name]},setItem:function(name,value){return data[name]=value,storage.setItem(storageKey,data)},removeItem:function(name){return data[name]=void 0,storage.setItem(storageKey,data)},clear:function(){return data={},storage.removeItem(storageKey)},removeStore:function(){return data={},storage.removeStore()}}})})}}),function(global,
factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("core/store")):"function"==typeof define&&define.amd?define("core/tokenStore",["lodash","core/promise","core/store"],factory):(global=global||self)["core/tokenStore"]=factory(global._,global["core/promise"],global["core/store"])}(this,function(_,Promise,store){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,store=store&&store.hasOwnProperty("default")?store.default:store;var defaultConfig={maxSize:6,tokenTimeLimit:144e4};return function(
options){var config=_.defaults(options||{},defaultConfig),getStore=function(){return store("tokenStore.tokens",store.backends.memory)};return{dequeue:function(){var self=this;return self.getIndex().then(function(latestIndex){var key=_.first(latestIndex);return key?getStore().then(function(storage){return storage.getItem(key)}).then(function(token){return self.remove(key).then(function(){return token})}):Promise.resolve()})},enqueue:function(token){var self=this;return _.isString(token)&&(token={value:token,receivedAt:Date.now()}),getStore().then(function(storage){return storage.setItem(token.value,token)}).then(function(updated){
return!!updated&&self.enforceMaxSize().then(function(){return!0})})},getIndex:function(){return this.getTokens().then(function(tokens){return _.chain(tokens).values().sort(function(t1,t2){return t1.receivedAt-t2.receivedAt}).map("value").value()})},has:function(key){return this.getIndex().then(function(latestIndex){return _.contains(latestIndex,key)})},remove:function(key){return this.has(key).then(function(result){return!!result&&getStore().then(function(storage){return storage.removeItem(key)})})},clear:function(){return getStore().then(function(storage){return storage.clear()})},getTokens:function(){return getStore().then(function(storage){
return storage.getItems()})},getSize:function(){return this.getIndex().then(function(latestIndex){return latestIndex.length})},setMaxSize:function(size){_.isNumber(size)&&0<size&&size!==config.maxSize&&(config.maxSize=size,this.enforceMaxSize())},enforceMaxSize:function(){var self=this;return this.getIndex().then(function(latestIndex){var keysToRemove,excess=latestIndex.length-config.maxSize;return!(0<excess)||(keysToRemove=latestIndex.slice(0,excess),Promise.all(_.map(keysToRemove,function(key){return self.remove(key)})))})},checkExpiry:function(token){return!(Date.now()-token.receivedAt>config.tokenTimeLimit)||this.remove(token.value)},
expireOldTokens:function(){var self=this;return self.getTokens().then(function(tokens){return _.reduce(tokens,function(previousPromise,nextToken){return previousPromise.then(function(){return self.checkExpiry(nextToken)})},Promise.resolve()).then(function(){return!0})})}}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("module"),require("core/tokenStore"),require("core/promise"),require("core/promiseQueue")):"function"==typeof define&&define.amd?define("core/tokenHandler",["lodash","module","core/tokenStore","core/promise","core/promiseQueue"],factory):(global=global||self
)["core/tokenHandler"]=factory(global._,global.module,global["core/tokenStore"],global["core/promise"],global["core/promiseQueue"])}(this,function(_,module,tokenStoreFactory,Promise,promiseQueue){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,module=module&&module.hasOwnProperty("default")?module.default:module,tokenStoreFactory=tokenStoreFactory&&tokenStoreFactory.hasOwnProperty("default")?tokenStoreFactory.default:tokenStoreFactory,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,promiseQueue=promiseQueue&&promiseQueue.hasOwnProperty("default")?promiseQueue.default:promiseQueue;var clientConfigFetched=!1,defaults={
maxSize:6,tokenTimeLimit:144e4};return function(options){var tokenStore;return _.isString(options)&&(options={initialToken:options}),options=_.defaults({},options,defaults),tokenStore=tokenStoreFactory(options),{getToken:function(){var self=this,initialToken=options.initialToken,getFirstTokenValue=function(){return tokenStore.dequeue().then(function(currentToken){return currentToken?currentToken.value:null})};return initialToken?(options.initialToken=null,Promise.resolve(initialToken)):tokenStore.expireOldTokens().then(function(){return tokenStore.getSize()}).then(function(queueSize){return 0<queueSize?getFirstTokenValue():clientConfigFetched?Promise.reject(
new Error("No tokens available. Please refresh the page.")):self.getClientConfigTokens().then(getFirstTokenValue)})},setToken:function(newToken){return tokenStore.enqueue(newToken)},getClientConfigTokens:function(){var self=this,clientTokens=_.map(module.config().tokens,function(serverToken){return{value:serverToken,receivedAt:Date.now()}});return clientConfigFetched=!0,Promise.resolve(clientTokens).then(function(newTokens){var setTokenQueue=promiseQueue();return _.forEach(newTokens,function(token){setTokenQueue.serie(function(){return self.setToken(token)})}),setTokenQueue.serie(function(){return!0})})},clearStore:function(){return tokenStore.clear()},
getQueueLength:function(){return tokenStore.getSize()},setMaxSize:function(size){tokenStore.setMaxSize(size)}}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("core/eventifier")):"function"==typeof define&&define.amd?define("core/connectivity",["core/eventifier"],factory):(global=global||self)["core/connectivity"]=factory(global["core/eventifier"])}(this,function(eventifier){"use strict";eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier.default:eventifier;var status=navigator.onLine,connectivity=eventifier({setOnline:function(){return this.isOffline()&&(status=!0,
this.trigger("online").trigger("change",status)),this},setOffline:function(){return this.isOnline()&&(status=!1,this.trigger("offline").trigger("change",status)),this},isOnline:function(){return status},isOffline:function(){return!status}});return window.addEventListener("online",function(){connectivity.setOnline()}),window.addEventListener("offline",function(){connectivity.setOffline()}),connectivity}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("core/providerRegistry"),require("core/delegator"),require("core/eventifier")
):"function"==typeof define&&define.amd?define("core/communicator",["lodash","core/promise","core/providerRegistry","core/delegator","core/eventifier"],factory):(global=global||self)["core/communicator"]=factory(global._,global["core/promise"],global["core/providerRegistry"],global["core/delegator"],global["core/eventifier"])}(this,function(_,Promise,providerRegistry,delegator,eventifier){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,providerRegistry=providerRegistry&&providerRegistry.hasOwnProperty("default")?providerRegistry.default:providerRegistry,
delegator=delegator&&delegator.hasOwnProperty("default")?delegator.default:delegator,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier.default:eventifier;var defaults={timeout:3e4};return providerRegistry(function communicatorFactory(providerName,config){var communicator,delegate,extendedConfig=_(config||{}).defaults(defaults).value(),states={},provider=communicatorFactory.getProvider(providerName);return(communicator=eventifier({init:function(){var self=this;return this.getState("ready")?Promise.resolve():delegate("init").then(function(){self.setState("ready").trigger("ready")})},destroy:function(){var self=this;return(self.getState(
"open")?self.close():Promise.resolve()).then(function(){return delegate("destroy").then(function(){self.trigger("destroyed"),states={}})})},open:function(){var self=this;return this.getState("open")?Promise.resolve():delegate("open").then(function(){self.setState("open").trigger("opened")})},close:function(){var self=this;return delegate("close").then(function(){self.setState("open",!1).trigger("closed")})},send:function(channel,message){var self=this;return this.getState("open")?delegate("send",channel,message).then(function(response){return self.trigger("sent",channel,message,response),Promise.resolve(response)}):Promise.reject()},channel:function(name,
handler){if(!_.isString(name)||name.length<=0)throw new TypeError("A channel must have a name");if(!_.isFunction(handler))throw new TypeError("A handler must be attached to a channel");return this.on("channel-"+name,handler),this},getConfig:function(){return extendedConfig},setState:function(name,state){return _.isUndefined(state)&&(state=!0),states[name]=!!state,this},getState:function(name){return!!states[name]}})).on("message",function(channel,message){this.trigger("channel-"+channel,message)}),delegate=delegator(communicator,provider,{name:"communicator"}),communicator})}),function(global,factory){
"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("jquery"),require("lodash"),require("i18n"),require("module"),require("context"),require("core/promise"),require("core/promiseQueue"),require("core/tokenHandler"),require("core/logger")):"function"==typeof define&&define.amd?define("core/request",["jquery","lodash","i18n","module","context","core/promise","core/promiseQueue","core/tokenHandler","core/logger"],factory):(global=global||self)["core/request"]=factory(global.$,global._,global.__,global.module,global.context,global["core/promise"],global["core/promiseQueue"],global["core/tokenHandler"],global["core/logger"])}(this,
function($,_,__,module,context,Promise,promiseQueue,tokenHandlerFactory,loggerFactory){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,__=__&&__.hasOwnProperty("default")?__.default:__,module=module&&module.hasOwnProperty("default")?module.default:module,context=context&&context.hasOwnProperty("default")?context.default:context,Promise=Promise&&Promise.hasOwnProperty("default")?Promise.default:Promise,promiseQueue=promiseQueue&&promiseQueue.hasOwnProperty("default")?promiseQueue.default:promiseQueue,tokenHandlerFactory=tokenHandlerFactory&&tokenHandlerFactory.hasOwnProperty("default"
)?tokenHandlerFactory.default:tokenHandlerFactory,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory.default:loggerFactory;var tokenHandler=tokenHandlerFactory(),queue=promiseQueue(),logger=loggerFactory("core/request"),createError=function(response,fallbackMessage,httpCode,httpSent){var err;return(err=response&&response.errorCode?new Error(response.errorCode+" : "+(response.errorMsg||response.errorMessage||response.error)):new Error(fallbackMessage)).response=response,err.sent=httpSent,httpCode&&(err.code=httpCode),err};return function(options){if(module.config().noToken&&(options.noToken=!0),_.isEmpty(options.url)
)throw new TypeError("At least give a URL...");function runRequest(){var headers,setTokenFromXhr=function(xhr){var token;return _.isFunction(xhr.getResponseHeader)&&(token=xhr.getResponseHeader("X-CSRF-Token"),logger.debug("received %s header %s","X-CSRF-Token",token),token)?tokenHandler.setToken(token):Promise.resolve()};return(headers=_.extend({},options.headers),options.noToken?Promise.resolve(headers):tokenHandler.getToken().then(function(token){return headers["X-CSRF-Token"]=token||"none",headers})).then(function(customHeaders){return new Promise(function(resolve,reject){$.ajax({url:options.url,method:options.method||"GET",headers:customHeaders,
data:options.data,contentType:options.contentType||void 0,dataType:options.dataType||"json",async:!0,timeout:1e3*options.timeout||1e3*context.timeout||0,beforeSend:function(){_.isEmpty(customHeaders)||logger.debug("sending %s header %s","X-CSRF-Token",customHeaders&&customHeaders["X-CSRF-Token"])},global:!options.background}).done(function(response,status,xhr){setTokenFromXhr(xhr).then(function(){return 204===xhr.status||response&&204===response.errorCode||"nocontent"===status?resolve():403===xhr.status||response&&403===response.errorCode?reject(createError(response,xhr.status+" : "+xhr.statusText,xhr.status,0<xhr.readyState)
):200===xhr.status||response&&!0===response.success?resolve(response):void reject(createError(response,__("The server has sent an empty response"),xhr.status,0<xhr.readyState))}).catch(function(error){logger.error(error),reject(createError(response,error,xhr.status,0<xhr.readyState))})}).fail(function(xhr,textStatus,errorThrown){var response;try{response=JSON.parse(xhr.responseText)}catch(parseErr){response=xhr.responseText}response=_.defaults(response,{success:!1,source:"network",cause:options.url,purpose:"proxy",context:this,code:xhr.status,sent:0<xhr.readyState,type:"error",message:errorThrown||__("An error occurred!")}),setTokenFromXhr(xhr).then(
function(){reject(createError(response,xhr.status+" : "+xhr.statusText,xhr.status,0<xhr.readyState))}).catch(function(error){logger.error(error),reject(createError(response,error,xhr.status,0<xhr.readyState))})})})})}return tokenHandler.getQueueLength().then(function(queueLength){return!0===options.noToken?runRequest():options.sequential||1===queueLength?queue.serie(runRequest):runRequest()})}}),define("taoQtiTestPreviewer/previewer/proxy/item",["jquery","lodash","i18n","core/promise","core/promiseQueue","core/communicator","core/request","taoQtiTestPreviewer/previewer/config/item"],function($,_,__,Promise,promiseQueue,communicatorFactory,coreRequest,
configFactory){"use strict";return{install:function(){var self=this;this.queue=promiseQueue(),this.prepareParams=function(actionParams){var stringifyParams=["itemState","itemResponse"];return _.isPlainObject(actionParams)?_.mapValues(actionParams,function(value,key){return _.contains(stringifyParams,key)?JSON.stringify(value):value}):actionParams},this.request=function(url,reqParams,contentType,noToken){return coreRequest({url:url,data:self.prepareParams(reqParams),method:reqParams?"POST":"GET",contentType:contentType,noToken:noToken,background:!1,sequential:!0,timeout:self.configStorage.getTimeout()}).then(function(response){return self.setOnline(),
response&&response.success?Promise.resolve(response):Promise.reject(response)}).catch(function(error){return error.data&&self.isConnectivityError(error.data)&&self.setOffline("request"),Promise.reject(error)})}},init:function(config,params){return this.configStorage=configFactory(config||{}),this.request(this.configStorage.getTestActionUrl("init"),params)},destroy:function(){return this.configStorage=null,this.queue=null,Promise.resolve()},callTestAction:function(action,params){return this.request(this.configStorage.getTestActionUrl(action),params)},callItemAction:function(itemIdentifier,action,params){return this.request(this.configStorage.getItemActionUrl(
itemIdentifier,action),params)},getItem:function(itemIdentifier,params){return this.request(this.configStorage.getItemActionUrl(itemIdentifier,"getItem"),params)},submitItem:function(itemIdentifier,state,response,params){var body=_.merge({itemState:state,itemResponse:response},params||{});return this.request(this.configStorage.getItemActionUrl(itemIdentifier,"submitItem"),body)}}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("jquery"),require("lodash"),require("util/namespace")):"function"==typeof define&&define.amd?define("util/shortcut/registry",["jquery","lodash","util/namespace"],factory):(
global=global||self)["util/shortcut/registry"]=factory(global.$,global._,global["util/namespace"])}(this,function($,_,namespaceHelper){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$,_=_&&_.hasOwnProperty("default")?_.default:_,namespaceHelper=namespaceHelper&&namespaceHelper.hasOwnProperty("default")?namespaceHelper.default:namespaceHelper;var modifiers={ctrl:"ctrlKey",alt:"altKey",option:"altKey",shift:"shiftKey",meta:"metaKey",cmd:"metaKey",win:"metaKey"},translateKeys={escape:"esc",arrowdown:"down",arrowleft:"left",arrowright:"right",arrowup:"up"},specialKeys={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",
33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"meta",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",145:"scrolllock",144:"numlock"};function registerEvent(target,eventName,listener){target.addEventListener?target.addEventListener(eventName,listener,!1):target.attachEvent?target.attachEvent("on"+eventName,listener):target["on"+eventName]=listener}function unregisterEvent(target,eventName,listener){target.removeEventListener?target.removeEventListener(eventName,listener,!1):target.detachEvent?target.detachEvent("on"+eventName,
listener):target["on"+eventName]=null}function normalizeCommand(descriptor){var key=translateKeys[descriptor.key]||descriptor.key,parts=[];return descriptor.ctrlKey&&parts.push("control"),descriptor.altKey&&parts.push("alt"),descriptor.shiftKey&&parts.push("shift"),descriptor.metaKey&&parts.push("meta"),descriptor.scrollDown&&parts.push("scrollDown"),descriptor.scrollUp&&parts.push("scrollUp"),descriptor.clickLeft&&parts.push("clickLeft"),descriptor.clickRight&&parts.push("clickRight"),descriptor.clickMiddle&&parts.push("clickMiddle"),descriptor.clickBack&&parts.push("clickBack"),descriptor.clickForward&&parts.push("clickForward"),key&&parts.indexOf(key
)<0&&parts.push(key),parts.join("+")}function parseCommand(shortcut){var parts=namespaceHelper.getName(shortcut).split("+"),descriptor={keyboardInvolved:!1,mouseClickInvolved:!1,mouseWheelInvolved:!1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,key:null,scrollUp:null,scrollDown:null,clickLeft:null,clickRight:null,clickMiddle:null,clickBack:null,clickForward:null};return _.forEach(parts,function(part){if(modifiers[part])descriptor[modifiers[part]]=!0;else if(0<=part.indexOf("mouse")){if(descriptor.keyboardInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");0<=part.indexOf("scroll")&&(descriptor.mouseWheelInvolved=!0,
descriptor.scrollUp=0<=part.indexOf("up"),descriptor.scrollDown=0<=part.indexOf("down")),0<=part.indexOf("click")&&(descriptor.mouseClickInvolved=!0,descriptor.clickLeft=0<=part.indexOf("left"),descriptor.clickRight=0<=part.indexOf("right"),descriptor.clickMiddle=0<=part.indexOf("middle"),descriptor.clickBack=0<=part.indexOf("back"),descriptor.clickForward=0<=part.indexOf("forward"))}else{if(descriptor.mouseClickInvolved||descriptor.mouseWheelInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");descriptor.keyboardInvolved=!0,descriptor.key=part}}),descriptor}return function(root,defaultOptions){var keyboardIsRegistered=!1,
mouseClickIsRegistered=!1,mouseWheelIsRegistered=!1,keyboardCount=0,mouseClickCount=0,mouseWheelCount=0,shortcuts={},handlers={},states={};function getHandlers(command,namespace){return handlers[namespace]=handlers[namespace]||{},handlers[namespace][command]=handlers[namespace][command]||[],handlers[namespace][command]}function getCommandHandlers(command){return _.reduce(handlers,function(acc,nsHandlers){return nsHandlers[command]&&(acc=acc.concat(nsHandlers[command])),acc},[])}function setOptions(descriptor,options){descriptor.options=_.defaults(_.merge(descriptor.options||{},options),defaultOptions)}function unregisterKeyboard(){--keyboardCount<=0&&(
keyboardCount=0,keyboardIsRegistered&&(unregisterEvent(root,"keydown",onKeyboard),keyboardIsRegistered=!1))}function unregisterMouseClick(){--mouseClickCount<=0&&(mouseClickCount=0,mouseClickIsRegistered&&(unregisterEvent(root,"click",onMouseClick),mouseClickIsRegistered=!1))}function unregisterMouseWheel(){--mouseWheelCount<=0&&(mouseWheelCount=0,mouseWheelIsRegistered&&(unregisterEvent(root,"wheel",onMouseWheel),mouseWheelIsRegistered=!1))}function registerCommand(command,descriptor){(shortcuts[command]=descriptor).keyboardInvolved&&(keyboardIsRegistered||(registerEvent(root,"keydown",onKeyboard),keyboardIsRegistered=!0),keyboardCount++),
descriptor.mouseClickInvolved&&(mouseClickIsRegistered||(registerEvent(root,"click",onMouseClick),mouseClickIsRegistered=!0),mouseClickCount++),descriptor.mouseWheelInvolved&&(mouseWheelIsRegistered||(registerEvent(root,"wheel",onMouseWheel),mouseWheelIsRegistered=!0),mouseWheelCount++)}function onKeyboard(event){processShortcut(event,{keyboardInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey,key:function(event){var code=event.which||event.keyCode,character=32<=code?String.fromCharCode(code).toLowerCase():"",key=event.key&&event.key.toLowerCase(),keyName=event.code&&event.code.toLowerCase();return keyName&&(
0===keyName.indexOf("key")?(key<"a"||"z"<key)&&"a"<=character&&character<="z"&&(key=character):0===keyName.indexOf("digit")&&(key=keyName.substr(5))),specialKeys[code]||key||character}(event)})}function onMouseClick(event){processShortcut(event,_.merge({mouseClickInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey},function(event){var buttons={clickLeft:!1,clickRight:!1,clickMiddle:!1,clickBack:!1,clickForward:!1};if(event.buttons)buttons.clickLeft=!!(1&event.buttons),buttons.clickRight=!!(2&event.buttons),buttons.clickMiddle=!!(4&event.buttons),buttons.clickBack=!!(8&event.buttons),buttons.clickForward=!!(
16&event.buttons);else switch(event.button){case 0:buttons.clickLeft=!0;break;case 1:buttons.clickMiddle=!0;break;case 2:buttons.clickRight=!0;break;case 3:buttons.clickBack=!0;break;case 4:buttons.clickForward=!0}return buttons}(event)))}function onMouseWheel(event){processShortcut(event,_.merge({mouseClickInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey},function(event){return{scrollUp:event.deltaY<0,scrollDown:0<event.deltaY}}(event)))}function processShortcut(event,descriptor){var shortcutHandlers,$target,command=normalizeCommand(descriptor),shortcut=shortcuts[command];if(shortcut&&!states.disabled){if(
!0===shortcut.options.avoidInput&&($target=$(event.target)).closest('[type="text"],textarea').length&&(!shortcut.options.allowIn||!$target.closest(shortcut.options.allowIn).length))return;!1===shortcut.options.propagate&&event.stopPropagation(),!0===shortcut.options.prevent&&event.preventDefault(),(shortcutHandlers=getCommandHandlers(command))&&_.forEach(shortcutHandlers,function(handler){handler(event,command)})}}return root.jquery&&(root=root.get(0)),{set:function(shortcut,options){return _.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);setOptions(descriptor,
options),registerCommand(command,descriptor)}),this},add:function(shortcut,handler,options){return _.isFunction(handler)&&_.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var namespace=namespaceHelper.getNamespace(normalized,"*"),descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);setOptions(descriptor,options),registerCommand(command,descriptor),getHandlers(command,namespace).push(handler)}),this},remove:function(shortcut){return _.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var namespace=namespaceHelper.getNamespace(normalized,"*"),command=normalizeCommand(parseCommand(normalized));!function(command
,namespace){namespace&&!command?handlers[namespace]={}:_.forEach(handlers,function(nsHandlers,ns){!nsHandlers[command]||"*"!==namespace&&namespace!==ns||(nsHandlers[command]=[])})}(command,namespace),getCommandHandlers(command).length||function(command){var descriptor=shortcuts[command];shortcuts[command]=null,descriptor&&(descriptor.keyboardInvolved&&unregisterKeyboard(),descriptor.mouseClickInvolved&&unregisterMouseClick(),descriptor.mouseWheelInvolved&&unregisterMouseWheel())}(command)}),this},exists:function(shortcut){var normalized=String(shortcut).trim().toLowerCase(),namespace=namespaceHelper.getNamespace(normalized,"*"),command=normalizeCommand(
parseCommand(normalized)),shortcutExists=!1;return shortcuts[command]?shortcutExists="*"===namespace||!!getHandlers(command,namespace).length:command||(shortcutExists=!_.isEmpty(handlers[namespace])),shortcutExists},clear:function(){return shortcuts={},handlers={},mouseWheelCount=mouseClickCount=keyboardCount=0,unregisterKeyboard(),unregisterMouseClick(),unregisterMouseWheel(),this},getState:function(name){return!!states[name]},setState:function(name,state){return states[name]=!!state,this},enable:function(){return this.setState("disabled",!1),this},disable:function(){return this.setState("disabled",!0),this}}}}),function(global,factory){
"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("util/shortcut/registry")):"function"==typeof define&&define.amd?define("util/shortcut",["util/shortcut/registry"],factory):(global=global||self)["util/shortcut"]=factory(global["util/shortcut/registry"])}(this,function(shortcutRegistry){"use strict";return(shortcutRegistry=shortcutRegistry&&shortcutRegistry.hasOwnProperty("default")?shortcutRegistry.default:shortcutRegistry)(window,{propagate:!1,prevent:!0})}),define("tpl!taoQtiTestPreviewer/previewer/provider/item/tpl/item",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){
return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),{},
'<main class="item-previewer-scope">\n    <div class="action-bar content-action-bar horizontal-action-bar top-action-bar">\n        <div class="control-box size-wrapper">\n            <div class="lft tools-box"></div>\n            <div class="rgt navi-box">\n                <ul class="plain navi-box-list"></ul>\n            </div>\n        </div>\n    </div>\n\n    <div class="test-runner-sections">\n\n        <aside class="test-sidebar test-sidebar-left"></aside>\n\n        <section class="content-wrapper">\n            <div id="qti-content"></div>\n        </section>\n    </div>\n\n    <nav class="action-bar content-action-bar horizontal-action-bar bottom-action-bar">\n        <div class="control-box size-wrapper">\n            <div class="lft tools-box"></div>\n            <div class="rgt navi-box">\n                <ul class="plain navi-box-list"></ul>\n            </div>\n        </div>\n    </nav>\n\n</main>'
})}),define("taoQtiTestPreviewer/previewer/provider/item/item",["jquery","lodash","i18n","core/store","core/promise","core/cachedStore","taoTests/runner/areaBroker","taoTests/runner/testStore","taoTests/runner/proxy","taoQtiTestPreviewer/previewer/proxy/item","taoQtiTest/runner/ui/toolbox/toolbox","taoQtiItem/runner/qtiItemRunner","taoQtiTest/runner/config/assetManager","tpl!taoQtiTestPreviewer/previewer/provider/item/tpl/item"],function($,_,__,store,Promise,cachedStore,areaBrokerFactory,testStoreFactory,proxyFactory,proxyProvider,toolboxFactory,qtiItemRunner,assetManagerFactory,layoutTpl){"use strict";var assetManager=assetManagerFactory()
;return proxyFactory.registerProvider("qtiItemPreviewerProxy",proxyProvider),{name:"qtiItemPreviewer",loadAreaBroker:function(){var $layout=$(layoutTpl());return areaBrokerFactory($layout,{contentWrapper:$(".content-wrapper",$layout),content:$("#qti-content",$layout),toolbox:$(".bottom-action-bar .tools-box",$layout),navigation:$(".bottom-action-bar .navi-box-list",$layout),control:$(".top-action-bar .control-box",$layout),actionsBar:$(".bottom-action-bar .control-box",$layout),panel:$(".test-sidebar-left",$layout),header:$(".top-action-bar .tools-box",$layout),context:$(".top-action-bar .navi-box-list",$layout)})},loadProxy:function(){
var config=this.getConfig(),proxyConfig=_.pick(config,["serviceCallId","bootstrap","timeout"]);return proxyFactory(config.proxyProvider||"qtiItemPreviewerProxy",proxyConfig)},loadTestStore:function(){var identifier=this.getConfig().serviceCallId||"test-"+Date.now();return testStoreFactory(identifier)},init:function(){var self=this,dataHolder=this.getDataHolder(),areaBroker=this.getAreaBroker();return areaBroker.setComponent("toolbox",toolboxFactory()),areaBroker.getToolbox().init(),this.on("submititem",function(){var itemRunner=this.itemRunner,itemState=itemRunner.getState(),itemResponses=itemRunner.getResponses();return this.trigger(
"disabletools disablenav"),this.trigger("submitresponse",itemResponses,itemState),this.getProxy().submitItem(dataHolder.get("itemIdentifier"),itemState,itemResponses).then(function(response){self.trigger("scoreitem",response),self.trigger("enabletools enablenav resumeitem")}).catch(function(err){self.trigger("enabletools enablenav"),200===err.code&&self.trigger("alert.submitError",err.message||__("An error occurred during results submission. Please retry."),function(){self.trigger("resumeitem")})})}).on("ready",function(){var itemIdentifier=dataHolder.get("itemIdentifier"),itemData=dataHolder.get("itemData");itemIdentifier&&(itemData?self.renderItem(
itemIdentifier,itemData):self.loadItem(itemIdentifier))}).on("loaditem",function(itemRef,itemData){dataHolder.set("itemIdentifier",itemRef),dataHolder.set("itemData",itemData)}).on("renderitem",function(){this.trigger("enabletools enablenav")}).on("resumeitem",function(){this.trigger("enableitem enablenav")}).on("disableitem",function(){this.trigger("disabletools")}).on("enableitem",function(){this.trigger("enabletools")}).on("error",function(){this.trigger("disabletools enablenav")}).on("finish leave",function(){this.trigger("disablenav disabletools"),this.flush()}).on("flush",function(){this.destroy()}),this.getProxy().init().then(function(data){
dataHolder.set("itemIdentifier",data.itemIdentifier),dataHolder.set("itemData",data.itemData)})},render:function(){var config=this.getConfig(),areaBroker=this.getAreaBroker();config.renderTo.append(areaBroker.getContainer()),areaBroker.getToolbox().render(areaBroker.getToolboxArea())},loadItem:function(itemIdentifier){return this.getProxy().getItem(itemIdentifier)},renderItem:function(itemIdentifier,itemData){var self=this,changeState=function(){self.setItemState(itemIdentifier,"changed",!0)};return new Promise(function(resolve,reject){assetManager.setData("baseUrl",itemData.baseUrl),itemData.content=itemData.content||{},self.itemRunner=qtiItemRunner(
itemData.content.type,itemData.content.data,{assetManager:assetManager}).on("error",function(err){self.trigger("enablenav"),reject(err)}).on("init",function(){var itemContainer=self.getAreaBroker().getContentArea(),options=_.pick(itemData,["state","portableElements"]);this.render(itemContainer,options)}).on("render",function(){this.on("responsechange",changeState),this.on("statechange",changeState),resolve()}).init()})},unloadItem:function(){var self=this;return self.trigger("beforeunloaditem disablenav disabletools"),new Promise(function(resolve){self.itemRunner?self.itemRunner.on("clear",resolve).clear():resolve()})},destroy:function(){
var areaBroker=this.getAreaBroker();this.itemRunner&&this.itemRunner.clear(),this.itemRunner=null,areaBroker&&areaBroker.getToolbox().destroy()}}}),function(c){var d=document,a="appendChild",i="styleSheet",s=d.createElement("style");s.type="text/css",d.getElementsByTagName("head")[0][a](s),s[i]?s[i].cssText=c:s[a](d.createTextNode(c))}(
'@-o-keyframes loadingbar{0%{left:-10%}50%{left:90%}100%{left:-10%}}@-moz-keyframes loadingbar{0%{left:-10%}50%{left:90%}100%{left:-10%}}@-webkit-keyframes loadingbar{0%{left:-10%}50%{left:90%}100%{left:-10%}}@keyframes loadingbar{0%{left:-10%}50%{left:90%}100%{left:-10%}}.loading-bar{height:6px;position:absolute;width:100%;top:0px;display:none;z-index:10000;cursor:progress}.loading-bar.fixed{position:fixed;width:100%}.loading-bar.fixed:before{top:0 !important}.loading-bar.loading{display:block;overflow:hidden;top:58px}.loading-bar.loading:before{position:absolute;content:\'\';height:6px;width:20%;display:block;transform:translateZ(0);background:-webkit-linear-gradient(to right, rgba(0,0,0,0) 0%, #c35a13 20%, #c35a13 80%, rgba(0,0,0,0) 100%);background:-moz-linear-gradient(to right, rgba(0,0,0,0) 0%, #c35a13 20%, #c35a13 80%, rgba(0,0,0,0) 100%);background:-ms-linear-gradient(to right, rgba(0,0,0,0) 0%, #c35a13 20%, #c35a13 80%, rgba(0,0,0,0) 100%);background:-o-linear-gradient(to right, rgba(0,0,0,0) 0%, #c35a13 20%, #c35a13 80%, rgba(0,0,0,0) 100%);background:linear-gradient(to right, rgba(0,0,0,0) 0%, #c35a13 20%, #c35a13 80%, rgba(0,0,0,0) 100%);-webkit-animation:loadingbar 5s linear infinite;-moz-animation:loadingbar 5s linear infinite;-ms-animation:loadingbar 5s linear infinite;-o-animation:loadingbar 5s linear infinite;animation:loadingbar 5s linear infinite}.loading-bar.loading.loadingbar-covered{top:0px;overflow-y:visible}.loading-bar.loading.loadingbar-covered:before{top:86px}.no-version-warning .loading-bar.loadingbar-covered:before{top:58px}.action-bar{background:#266d9c;padding:3px;overflow:hidden;color:#e7eff4}.action-bar li{float:left}.action-bar li .li-inner{padding-bottom:1px;text-decoration:none !important;outline:0;display:inline-block;color:inherit}.action-bar li .li-inner:hover{color:white}.action-bar li span.glyph{text-shadow:0 0 0 transparent;color:inherit}.action-bar li input{width:100%;font-size:12px;font-size:1.2rem;padding:2px 4px}.action-bar li.active .li-inner{color:white}.action-bar.horizontal-action-bar{padding:5px;height:35px}.action-bar.horizontal-action-bar .search-area{margin:2px 0 0 0;border:none;float:right;display:inline-block;position:relative;padding:0 30px 0 0}.action-bar.horizontal-action-bar .search-area input{padding-right:34px;min-width:250px !important}.action-bar.horizontal-action-bar .search-area button{position:absolute;right:32px;top:-2px;cursor:default;opacity:.5;background:transparent;width:25px;height:25px}.action-bar.horizontal-action-bar .search-area button:before{color:#666}.action-bar.horizontal-action-bar .search-area .icon-help{position:absolute;right:5px;top:-1px;text-shadow:0px 0px transparent;color:white;cursor:pointer;display:block;width:24px;height:24px;line-height:24px;text-align:center}.action-bar.horizontal-action-bar li{margin:0 1px;border:1px transparent solid;text-align:center;float:left}.action-bar.horizontal-action-bar li .glyph{width:14px}.action-bar.horizontal-action-bar li .svg-glyph{height:14px;width:14px;margin-right:9px}.action-bar.horizontal-action-bar li.btn-info{overflow:hidden;background:transparent}.action-bar.horizontal-action-bar li.btn-info:hover,.action-bar.horizontal-action-bar li.btn-info.active{border-color:rgba(255,255,255,0.3);opacity:1}.action-bar.horizontal-action-bar li.disabled{background:none !important;text-shadow:inherit !important;opacity:0.45 !important;color:inherit !important}.action-bar.horizontal-action-bar li.disabled a{cursor:not-allowed !important}.action-bar.vertical-action-bar li{max-height:60px}.action-bar.vertical-action-bar li .li-inner{height:60px;display:block;overflow:hidden;text-overflow:ellipsis;text-align:center;font-size:12px;font-size:1.2rem;line-height:12px}.action-bar.vertical-action-bar li .glyph{display:block;margin:12px auto 3px;width:20px;height:20px}.action-bar.tree-action-bar{background:#f3f1ef;position:relative;left:-1px;padding:0;margin:0 2.8571428571% 8px 2.8571428571%;width:94.6428571429%;font-size:13px;font-size:1.3rem}.action-bar.tree-action-bar li{background:rgba(255,255,255,0.5);border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;line-height:1.3;padding:0;text-align:center;float:left;width:65px;height:65px;margin:0 1px 1px 0}.action-bar.tree-action-bar li .glyph,.action-bar.tree-action-bar li .svg-glyph{display:block;color:#0e5d91;margin:12px auto 1px !important}.action-bar.tree-action-bar li .svg-glyph{width:20px;height:20px}.action-bar.tree-action-bar li .glyph{font-size:17px !important;font-size:1.7rem !important}.action-bar.tree-action-bar li .li-inner{display:block;height:65px;padding:2px;font-size:11px;font-size:1.1rem;color:#222}.action-bar.tree-action-bar li:hover{background:#ddd;color:#666}.action-bar .tree-filters{width:160px;position:relative}.action-bar .tree-filters input{padding-right:24px}.action-bar .tree-filters span{position:absolute;right:3px;color:#555;width:22px;top:2px;line-height:20px;display:inline-block;text-align:center;text-shadow:0 0 0 transparent;border-left:1px solid #ddd;cursor:pointer}.action-bar .tree-filters span.icon-close{display:none}.action-bar .tree-filters span:hover{color:#0e5d91}@media (max-width: 1150px){.action-bar.horizontal-action-bar .search-area{float:none;position:absolute;right:0px}.action-bar.horizontal-action-bar .search-area input{padding-right:30px;min-width:auto !important;width:150px}.action-bar.horizontal-action-bar .search-area input:focus{width:220px}}body.oversized-nav:not(.delivery-scope) .action-bar.horizontal-action-bar .search-area{float:none;position:absolute;right:0px}body.oversized-nav:not(.delivery-scope) .action-bar.horizontal-action-bar .search-area input{padding-right:30px;min-width:auto !important;width:150px}body.oversized-nav:not(.delivery-scope) .action-bar.horizontal-action-bar .search-area input:focus{width:220px}.section-container{top:0 !important}.section-container .flex-container-full{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:0 0 100%;-webkit-flex:0 0 100%;flex:0 0 100%}.section-container .flex-container-half{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:0 0 50%;-webkit-flex:0 0 50%;flex:0 0 50%}.section-container .flex-container-third{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:0 0 33.3333333333%;-webkit-flex:0 0 33.3333333333%;flex:0 0 33.3333333333%}.section-container .flex-container-quarter{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:0 0 25%;-webkit-flex:0 0 25%;flex:0 0 25%}.section-container .flex-container-remaining{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 480px;-webkit-flex:1 1 480px;flex:1 1 480px}.section-container .flex-container-main-form{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:0 0 500px;-webkit-flex:0 0 500px;flex:0 0 500px;margin:0 20px 20px 0}.section-container .flex-container-navi{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:0 0 280px;-webkit-flex:0 0 280px;flex:0 0 280px}.section-container .section-header{border:none}.section-container .content-panel{width:100%;height:100%;margin:0;padding:0;border:none !important;display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch}.section-container .tab-container{border:none;display:none;list-style-type:none;padding:0;margin:0}.section-container .tab-container li{float:left;position:relative;top:0;padding:0;margin:0 1px 0px 0;border-top:1px solid #f3f1ef !important;border-bottom:1px solid #f3f1ef !important;background:#f3f1ef !important}.section-container .tab-container li a{top:0 !important;margin-bottom:0 !important;padding:6px 16px;text-decoration:none;min-height:32px;color:#222;float:left}.section-container .tab-container li.active,.section-container .tab-container li:hover{border-bottom-color:#4a86ad !important;border-top-color:#6e9ebd !important;background:#266d9c !important}.section-container .tab-container li.active a,.section-container .tab-container li:hover a{background:transparent !important;border-color:transparent !important;color:#fff !important;text-shadow:1px 1px 0 rgba(0,0,0,0.2)}.section-container .tab-container li.disabled:hover{background:#f3f1ef !important}.section-container .tab-container li.disabled:hover a{cursor:not-allowed !important;color:#222 !important}.section-container .navi-container{display:none;background:#f3f1ef;-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:0 0 280px;-webkit-flex:0 0 280px;flex:0 0 280px;border-right:1px #ddd solid}.section-container .navi-container .block-title{font-size:14px;font-size:1.4rem;padding:2px 8px;margin:0}.section-container .navi-container .tree-action-bar-box{margin:10px 0;opacity:0}.section-container .navi-container .tree-action-bar-box.active{opacity:1;-webkit-opacity:0.25s ease-in-out;-moz-opacity:0.25s ease-in-out;opacity:0.25s ease-in-out}.section-container .content-container{border:none;-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1}.section-container .content-block{padding:20px;overflow-y:auto;display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch}.section-container .content-block>.grid-container{width:100%}.section-container .content-block .data-container-wrapper{padding:0px 20px 0 0}.section-container .content-block .data-container-wrapper:before,.section-container .content-block .data-container-wrapper:after{content:" ";display:table}.section-container .content-block .data-container-wrapper:after{clear:both}.section-container .content-block .data-container-wrapper>section,.section-container .content-block .data-container-wrapper .data-container{width:260px;margin:0 20px 20px 0;float:left;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px}.section-container .content-block .data-container-wrapper>section.double,.section-container .content-block .data-container-wrapper .data-container.double{width:540px}.section-container .content-block .data-container-wrapper>section .emptyContentFooter,.section-container .content-block .data-container-wrapper .data-container .emptyContentFooter{display:none}.section-container .content-block .data-container-wrapper>section .tree,.section-container .content-block .data-container-wrapper .data-container .tree{border:none;max-width:none;max-height:none}.section-container .content-block .data-container-wrapper>section form,.section-container .content-block .data-container-wrapper .data-container form{background:none;border:none;margin:0;padding:0}.section-container .content-block .data-container-wrapper>section>header,.section-container .content-block .data-container-wrapper>section .ui-widget-header,.section-container .content-block .data-container-wrapper .data-container>header,.section-container .content-block .data-container-wrapper .data-container .ui-widget-header{background:#f3f1ef;border-width:0px !important;border-bottom:1px #ddd solid !important}.section-container .content-block .data-container-wrapper>section>header h1,.section-container .content-block .data-container-wrapper>section>header h6,.section-container .content-block .data-container-wrapper>section .ui-widget-header h1,.section-container .content-block .data-container-wrapper>section .ui-widget-header h6,.section-container .content-block .data-container-wrapper .data-container>header h1,.section-container .content-block .data-container-wrapper .data-container>header h6,.section-container .content-block .data-container-wrapper .data-container .ui-widget-header h1,.section-container .content-block .data-container-wrapper .data-container .ui-widget-header h6{padding:4px;margin:0;font-size:14px;font-size:1.4rem}.section-container .content-block .data-container-wrapper>section>div,.section-container .content-block .data-container-wrapper>section .ui-widget-content,.section-container .content-block .data-container-wrapper>section .container-content,.section-container .content-block .data-container-wrapper .data-container>div,.section-container .content-block .data-container-wrapper .data-container .ui-widget-content,.section-container .content-block .data-container-wrapper .data-container .container-content{border-width:0px !important;overflow-y:auto;min-height:250px;padding:5px}.section-container .content-block .data-container-wrapper>section>div .icon-grip,.section-container .content-block .data-container-wrapper>section .ui-widget-content .icon-grip,.section-container .content-block .data-container-wrapper>section .container-content .icon-grip,.section-container .content-block .data-container-wrapper .data-container>div .icon-grip,.section-container .content-block .data-container-wrapper .data-container .ui-widget-content .icon-grip,.section-container .content-block .data-container-wrapper .data-container .container-content .icon-grip{cursor:move}.section-container .content-block .data-container-wrapper>section>footer,.section-container .content-block .data-container-wrapper .data-container>footer{min-height:33px}.section-container .content-block .data-container-wrapper>section>footer,.section-container .content-block .data-container-wrapper>section .data-container-footer,.section-container .content-block .data-container-wrapper .data-container>footer,.section-container .content-block .data-container-wrapper .data-container .data-container-footer{background:#f3f1ef;text-align:right !important;padding:4px;border-width:0px !important;border-top:1px #ddd solid !important}.section-container .content-block .data-container-wrapper>section>footer .square,.section-container .content-block .data-container-wrapper>section .data-container-footer .square,.section-container .content-block .data-container-wrapper .data-container>footer .square,.section-container .content-block .data-container-wrapper .data-container .data-container-footer .square{width:28px}.section-container .content-block .data-container-wrapper>section>footer .square span,.section-container .content-block .data-container-wrapper>section .data-container-footer .square span,.section-container .content-block .data-container-wrapper .data-container>footer .square span,.section-container .content-block .data-container-wrapper .data-container .data-container-footer .square span{padding:0;left:0}.section-container .content-block .data-container-wrapper>section ol,.section-container .content-block .data-container-wrapper .data-container ol{margin:0 0 0 15px;padding:10px}.section-container .content-block #form-container.ui-widget-content{border:none !important}.section-container .content-block form:not(.list-container){border:1px #ddd solid;background:#f3f1ef;padding:30px;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px}.section-container .content-block [class^="btn-"],.section-container .content-block [class*=" btn-"]{margin:0 2px}.previewer,.previewer-component{position:relative}.item-previewer-scope{position:relative;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:calc(100vh - 0px)}.item-previewer-scope .test-runner-sections{-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;overflow:hidden;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.item-previewer-scope .test-sidebar{background:#f3f1ef;-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;height:calc(100vh - 80px);overflow-y:auto;max-width:350px}.item-previewer-scope .test-sidebar>.qti-panel{max-width:350px;padding:10px}@media only screen and (max-device-width: 800px){.item-previewer-scope .test-sidebar{max-width:200px}.item-previewer-scope .test-sidebar>.qti-panel{max-width:200px}}@media only screen and (min-device-width: 800px) and (max-device-width: 1280px){.item-previewer-scope .test-sidebar{max-width:250px}.item-previewer-scope .test-sidebar>.qti-panel{max-width:250px}}@media only screen and (min-device-width: 1280px) and (max-device-width: 1440px){.item-previewer-scope .test-sidebar{max-width:300px}.item-previewer-scope .test-sidebar>.qti-panel{max-width:300px}}.item-previewer-scope .test-sidebar-left{border-right:1px #ddd solid}.item-previewer-scope .test-sidebar-right{border-left:1px #ddd solid}.item-previewer-scope .content-wrapper{position:relative;-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;overflow:auto;padding:0}.item-previewer-scope .content-wrapper .overlay{position:absolute;left:0;right:0;top:0;bottom:0;width:100%;opacity:.9}.item-previewer-scope .content-wrapper .overlay-full{background-color:#fff;opacity:1}.item-previewer-scope #qti-content{-webkit-overflow-scrolling:touch;max-width:1024px;width:100%;margin:auto}.item-previewer-scope #qti-item{width:100%;min-width:100%;height:auto;overflow:visible}.item-previewer-scope .qti-item{padding:30px}.item-previewer-scope .size-wrapper{max-width:1280px;margin:auto;width:100%}.item-previewer-scope #qti-rubrics{margin:auto;max-width:1024px;width:100%}.item-previewer-scope #qti-rubrics .qti-rubricBlock{margin:20px 0}.item-previewer-scope #qti-rubrics .hidden{display:none}.no-controls .item-previewer-scope{height:100vh}.previewer-component{background:inherit}.previewer-component.fullpage{position:absolute;top:0;left:0;right:0;bottom:0;z-index:100000}.previewer-component.fullpage .item-previewer-scope{height:100vh}.previewer-component.readonly .qti-item::before{content:\' \';position:absolute;top:0;left:0;right:0;bottom:0;z-index:100000}.item-previewer-scope .preview-console-closer{position:absolute;right:10px;top:10px;cursor:pointer;color:rgba(255,255,255,0.9);text-shadow:none}.item-previewer-scope .preview-console-closer:hover{color:white}.item-previewer-scope .preview-console{background:#2b2b2b;color:#fff;font-family:Consolas,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L",Monaco,"Courier New",Courier,monospace;position:relative}.item-previewer-scope .preview-console .preview-console-body{padding:5px;margin:0;height:30vh;overflow:auto}.item-previewer-scope .preview-console .preview-console-body .log-time{color:#999}.item-previewer-scope .preview-console .preview-console-body .log-type{color:#eee}.item-previewer-scope .preview-console .preview-console-body .log-message{color:#69f}.item-previewer-scope .preview-console .preview-console-body pre{margin:0}.item-previewer-scope .action-bar.content-action-bar{padding:2px}.item-previewer-scope .action-bar.content-action-bar li{margin:2px 0 0 10px;border:none}.item-previewer-scope .action-bar.content-action-bar li.btn-info{padding-top:6px;height:33px;margin-top:0;border-bottom:solid 2px transparent;border-radius:0}.item-previewer-scope .action-bar.content-action-bar li.btn-info.btn-group{border:none !important;overflow:hidden;padding:0}.item-previewer-scope .action-bar.content-action-bar li.btn-info.btn-group a{float:left;margin:0 2px;padding:0 15px;border:1px solid rgba(255,255,255,0.3);border-radius:0px;display:inline-block;height:inherit}.item-previewer-scope .action-bar.content-action-bar li.btn-info.btn-group a:first-of-type{border-top-left-radius:3px;border-bottom-left-radius:3px;margin-left:0}.item-previewer-scope .action-bar.content-action-bar li.btn-info.btn-group a:last-of-type{border-top-right-radius:3px;border-bottom-right-radius:3px;margin-right:0}.item-previewer-scope .action-bar.content-action-bar li.btn-info.btn-group a:hover,.item-previewer-scope .action-bar.content-action-bar li.btn-info.btn-group a.active{border-color:rgba(255,255,255,0.8)}.item-previewer-scope .action-bar.content-action-bar li.btn-info.btn-group a .no-label{padding-right:0}.item-previewer-scope .action-bar.content-action-bar li.btn-info:hover,.item-previewer-scope .action-bar.content-action-bar li.btn-info.active{border-bottom-color:rgba(255,255,255,0.8)}.item-previewer-scope .action-bar.content-action-bar li.btn-info:active,.item-previewer-scope .action-bar.content-action-bar li.btn-info.active{background:#e7eff4;border-color:rgba(255,255,255,0.8)}.item-previewer-scope .action-bar.content-action-bar li.btn-info:active a,.item-previewer-scope .action-bar.content-action-bar li.btn-info.active a{color:#266d9c;text-shadow:none}.item-previewer-scope .action-bar.content-action-bar li.btn-info:active:hover,.item-previewer-scope .action-bar.content-action-bar li.btn-info.active:hover{background:#fff}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar{opacity:1;height:40px}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar>.control-box{height:40px;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:space-between;-ms-flex-pack:space-between;justify-content:space-between;padding-left:10px;padding-right:10px}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box{color:rgba(255,255,255,0.9);text-shadow:1px 1px 0 black}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .lft,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .rgt{padding-left:20px}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .lft:first-child,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .rgt:first-child{padding-left:0}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .lft:last-child ul,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .rgt:last-child ul{display:inline-block}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box [class^="btn-"],.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box [class*=" btn-"]{white-space:nowrap}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box{position:relative;overflow:visible}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .action{position:relative;overflow:visible}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu{color:#222;background:#f3f1ef;border:1px solid #aaa9a7;overflow:auto;list-style:none;min-width:150px;margin:0;padding:0;position:absolute;bottom:36px;left:-3px}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action{display:inline-block;text-align:left;width:100%;white-space:nowrap;overflow:hidden;color:#222;border-bottom:1px solid #c2c1bf;margin:0;-moz-border-radius:0px;-webkit-border-radius:0px;border-radius:0px;height:32px;padding:6px 15px;line-height:1;border-left:solid 3px transparent}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action .icon-checkbox-checked{display:none}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.active{background-color:#dbd9d7;font-weight:bold}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover .icon-checkbox,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover .icon-checkbox,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.active .icon-checkbox{display:none}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover .icon-checkbox-checked,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover .icon-checkbox-checked,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.active .icon-checkbox-checked{display:inline-block}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover{background-color:#0e5d91;color:#fff;border-left-color:#313030 !important}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover .label,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover .icon,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover .label,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover .icon{color:#fff}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover .icon,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover .icon{color:#e7eff4}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action .label,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action .icon{font-size:14px;font-size:1.4rem;text-shadow:none;color:#222}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar{overflow:visible;position:relative}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .action{line-height:1.6}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .icon.no-label{padding-right:0}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .tool-label-collapsed .btn-info .text,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .tool-label-collapsed-hover .btn-info:not(:hover) .text,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.no-tool-label .text,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.tool-label-collapsed .text,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.tool-label-collapsed-over:not(:hover) .text{display:none}.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .tool-label-collapsed .btn-info .icon,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .tool-label-collapsed-hover .btn-info:not(:hover) .icon,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.no-tool-label .icon,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.tool-label-collapsed .icon,.item-previewer-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.tool-label-collapsed-over:not(:hover) .icon{padding:0}\n\n/*# sourceMappingURL=item.css.map */.devices-previewer{width:100%;height:100%;overflow:hidden}.devices-previewer:not(.disabled)[data-type="desktop"] .preview-container,.devices-previewer:not(.disabled)[data-type="mobile"] .preview-container{position:relative}.devices-previewer:not(.disabled)[data-type="desktop"] .preview-frame,.devices-previewer:not(.disabled)[data-type="mobile"] .preview-frame{position:relative;border:3px #aaa ridge;background:#5a5a5a;background:linear-gradient(135deg, #5a5a5a 0%, #565656 7%, #444 15%, #141414 30%);-webkit-box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7);-moz-box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7);-ms-box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7);-o-box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7);box-shadow:5px 5px 10px 0 rgba(0,0,0,0.7)}.devices-previewer:not(.disabled)[data-type="desktop"] .preview-content,.devices-previewer:not(.disabled)[data-type="mobile"] .preview-content{background:#fff;border-radius:3px;border:2px solid;border-color:#444 #999 #999 #444}.devices-previewer:not(.disabled)[data-type="mobile"] .preview-frame{border-radius:25px;padding:40px}.devices-previewer:not(.disabled)[data-type="desktop"] .preview-frame{border-radius:5px;padding:30px}\n\n/*# sourceMappingURL=devicesPreviewer.css.map */.devices-selector{display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}.devices-selector[data-type="standard"] .desktop-selector,.devices-selector[data-type="standard"] .mobile-selector,.devices-selector[data-type="standard"] .orientation-selector{display:none}.devices-selector[data-type="desktop"] .mobile-selector,.devices-selector[data-type="desktop"] .orientation-selector{display:none}.devices-selector[data-type="mobile"] .desktop-selector{display:none}.devices-selector .selector{display:inline-block;margin-top:0.3em}.devices-selector .selector:not(:last-child){margin-right:1rem}.devices-selector .selector select{overflow:visible}.devices-selector .selector .select2-container{text-shadow:none}\n\n/*# sourceMappingURL=devicesSelector.css.map */'
),define("taoQtiTestPreviewer/loader/qtiPreviewer.bundle",function(){}),define("taoQtiTestPreviewer/loader/qtiPreviewer.min",["taoItems/loader/taoItemsRunner.min","taoTests/loader/taoTestsRunner.min","taoQtiItem/loader/taoQtiItemRunner.min","taoQtiTest/loader/taoQtiTestRunner.min","taoQtiTest/loader/testPlugins.min"],function(){});
//# sourceMappingURL=qtiPreviewer.min.js.map